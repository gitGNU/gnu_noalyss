<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>phpcompta: user_menu.php File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a></div>
<h1>user_menu.php File Reference</h1>Nearly all the menu are here, some of them returns a HTML string, others echo directly the result. <a href="#_details">More...</a>
<p>

<p>
<a href="user__menu_8php-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a0">u_ShowDossier</a> ($p_user, $p_admin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show all the available folder for the users at the login page.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a1">GetAvailableFolder</a> ($p_user, $p_admin)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get all the available folders for the users, checked with the security.  <a href="#a1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a2">ShowMenuCompta</a> ($p_dossier, $p_high=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">show the top menu for the user profile and highight the selected one  <a href="#a2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a3">GetFirstJrnIdForJrnType</a> ($p_dossier, $p_type)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open the first legder automaticaly.  <a href="#a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a4">ShowMenuJrnUser</a> ($p_dossier, $p_type, $p_jrn, $p_extra=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the Menu from the jrn encode page.  <a href="#a4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a5">ShowMenuJrn</a> ($p_cn, $p_jrn_type, $p_jrn)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu of the jrn depending of its type, check with the security.  <a href="#a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a6">get_quick_key</a> ($title, &amp;$access_key_list)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu of the jrn depending of its type return a not yet used access key. The returned key is added to $access_key_list.  <a href="#a6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a7">u_ShowMenuRecherche</a> ($p_cn, $p_jrn, $p_sessid, $p_array=null)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the form for the search (module accountancy).  <a href="#a7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a8">ShowMenuAdvanced</a> ($default=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">build the menu of <a class="el" href="user__advanced_8php.html">user_advanced.php</a>  <a href="#a8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a9">ShowJrn</a> ($p_menu=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a string containing the menu main menu when you click on Journaux.  <a href="#a9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a10">ShowMenuFiche</a> ($p_dossier)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu for the card management.  <a href="#a10"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a11">MenuAdmin</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a12">ShowMenuDocument</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">: Display Document's menu  <a href="#a12"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a13">ShowMenuParam</a> ($p_action=&quot;&quot;)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the parameter menu.  <a href="#a13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a14">MenuJrn</a> ($p_dossier)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu in the jrn page.  <a href="#a14"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a15">ShowMenuPcmn</a> ($p_start=1)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu from the pcmn page.  <a href="#a15"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a16">ShowMenuComptaForm</a> ($p_dossier)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the left menu for the report (add a report, view it).  <a href="#a16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="user__menu_8php.html#a17">ShowMenuImport</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Show the menu for importing, verify and transfert Bank CSV.  <a href="#a17"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Nearly all the menu are here, some of them returns a HTML string, others echo directly the result. 
<p>

<p>
Definition in file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="a6"></a><!-- doxytag: member="user_menu.php::get_quick_key" ref="a6" args="($title, &amp;$access_key_list)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">get_quick_key           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>title</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&amp;$&nbsp;</td>
          <td class="mdname" nowrap> <em>access_key_list</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu of the jrn depending of its type return a not yet used access key. The returned key is added to $access_key_list. 
<p>
get_quick_key<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$title</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>&amp;$access_key_list</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string containing the menu<ul>
<li></li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00342">342</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="debug_8php-source.html#l00034">echo_debug()</a>.
<p>
Referenced by <a class="el" href="user__menu_8php-source.html#l00300">ShowMenuJrn()</a>.<div class="fragment"><pre class="fragment"><a name="l00343"></a>00343 {
<a name="l00344"></a>00344         $quick = $title[0];
<a name="l00345"></a>00345         <span class="keywordflow">if</span>(array_key_exists($quick, $access_key_list))
<a name="l00346"></a>00346         {
<a name="l00347"></a>00347                 <a class="code" href="debug_8php.html#a0">echo_debug</a>(<span class="stringliteral">" key exists: "</span> . $quick);
<a name="l00348"></a>00348                 <span class="keywordflow">return</span> <a class="code" href="user__menu_8php.html#a6">get_quick_key</a>(substr($title, 1), $access_key_list);
<a name="l00349"></a>00349         } <span class="keywordflow">else</span>
<a name="l00350"></a>00350         {
<a name="l00351"></a>00351                 <a class="code" href="debug_8php.html#a0">echo_debug</a>(<span class="stringliteral">" new key: "</span> . $quick);
<a name="l00352"></a>00352         }
<a name="l00353"></a>00353         $access_key_list[$quick] = $quick;
<a name="l00354"></a>00354         
<a name="l00355"></a>00355         <span class="keywordflow">return</span> $quick;
<a name="l00356"></a>00356 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1"></a><!-- doxytag: member="user_menu.php::GetAvailableFolder" ref="a1" args="($p_user, $p_admin)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">GetAvailableFolder           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_admin</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get all the available folders for the users, checked with the security. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_user</em>&nbsp;</td><td>user login </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_admin</em>&nbsp;</td><td>1 if admin </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>array containing<ul>
<li>ac_dossier.dos_id</li><li>ac_dossier.dos_name</li><li>ac_dossier.dos_description</li></ul>
</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00090">90</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="recherche_8php-source.html#l00066">$array</a>, <a class="el" href="impress__fiche_8php-source.html#l00026">$cn</a>, <a class="el" href="jrn__pdf_8php-source.html#l00069">$filter</a>, <a class="el" href="depense_8inc_8php-source.html#l00077">$Res</a>, <a class="el" href="bank_8inc_8php-source.html#l00169">$sql</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.
<p>
Referenced by <a class="el" href="user__menu_8php-source.html#l00037">u_ShowDossier()</a>.<div class="fragment"><pre class="fragment"><a name="l00091"></a>00091 {
<a name="l00092"></a>00092   <a class="code" href="jrn__pdf_8php.html#a7">$filter</a>=<span class="stringliteral">""</span>;
<a name="l00093"></a>00093   <span class="keywordflow">if</span> ($p_admin==0) {
<a name="l00094"></a>00094     <span class="comment">// show only available folders</span>
<a name="l00095"></a>00095     <span class="comment">// if user is not an admin</span>
<a name="l00096"></a>00096     <a class="code" href="bank_8inc_8php.html#a20">$sql</a>=<span class="stringliteral">"select distinct dos_id,dos_name,dos_description from ac_users </span>
<a name="l00097"></a>00097 <span class="stringliteral">                  natural join jnt_use_dos </span>
<a name="l00098"></a>00098 <span class="stringliteral">                  natural join  ac_dossier </span>
<a name="l00099"></a>00099 <span class="stringliteral">                  join  priv_user on ( priv_jnt=jnt_id)</span>
<a name="l00100"></a>00100 <span class="stringliteral">          where use_active=1 </span>
<a name="l00101"></a>00101 <span class="stringliteral">         and use_login='$p_user' </span>
<a name="l00102"></a>00102 <span class="stringliteral">         and priv_priv != 'NO' "</span>;
<a name="l00103"></a>00103 
<a name="l00104"></a>00104   } <span class="keywordflow">else</span> {
<a name="l00105"></a>00105     <a class="code" href="bank_8inc_8php.html#a20">$sql</a>=<span class="stringliteral">"select distinct dos_id,dos_name,dos_description from ac_users </span>
<a name="l00106"></a>00106 <span class="stringliteral">                  natural join jnt_use_dos </span>
<a name="l00107"></a>00107 <span class="stringliteral">                  natural join  ac_dossier </span>
<a name="l00108"></a>00108 <span class="stringliteral">      where  use_active=1 "</span>;
<a name="l00109"></a>00109   }
<a name="l00110"></a>00110   include_once(<span class="stringliteral">"postgres.php"</span>);
<a name="l00111"></a>00111   <a class="code" href="impress__fiche_8php.html#a0">$cn</a>=<a class="code" href="postgres_8php.html#a1">DbConnect</a>();
<a name="l00112"></a>00112   <a class="code" href="depense_8inc_8php.html#a4">$Res</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($cn,$sql);
<a name="l00113"></a>00113   $max=pg_numRows($Res);
<a name="l00114"></a>00114   <span class="keywordflow">if</span> ( $max == 0 ) <span class="keywordflow">return</span> 0;
<a name="l00115"></a>00115 
<a name="l00116"></a>00116   <span class="keywordflow">for</span> ($i=0;$i&lt;$max;$i++) {
<a name="l00117"></a>00117     <a class="code" href="recherche_8php.html#a4">$array</a>[]=pg_fetch_array($Res,$i);
<a name="l00118"></a>00118   }
<a name="l00119"></a>00119   <span class="keywordflow">return</span> <a class="code" href="recherche_8php.html#a4">$array</a>;
<a name="l00120"></a>00120 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3"></a><!-- doxytag: member="user_menu.php::GetFirstJrnIdForJrnType" ref="a3" args="($p_dossier, $p_type)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">GetFirstJrnIdForJrnType           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_dossier</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_type</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Open the first legder automaticaly. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_dossier</em>&nbsp;</td><td>($_SESSION['g_dossier']) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_type</em>&nbsp;</td><td>type of the ledger (VEN,ACH,FIN,ODS)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the first jrn_def_id</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00186">186</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="jrn__detail_8php-source.html#l00124">$l_line</a>, <a class="el" href="line__update_8php-source.html#l00070">$Ret</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.<div class="fragment"><pre class="fragment"><a name="l00187"></a>00187 {
<a name="l00188"></a>00188   include_once(<span class="stringliteral">"postgres.php"</span>);
<a name="l00189"></a>00189   
<a name="l00190"></a>00190   <span class="comment">//get db connection</span>
<a name="l00191"></a>00191   $Cn=<a class="code" href="postgres_8php.html#a1">DbConnect</a>($p_dossier);  
<a name="l00192"></a>00192   <span class="comment">//execute query</span>
<a name="l00193"></a>00193   <a class="code" href="line__update_8php.html#a8">$Ret</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($Cn,<span class="stringliteral">"select min(jrn_def_id) from jrn_def "</span>.
<a name="l00194"></a>00194                <span class="stringliteral">"where jrn_def_type='"</span>.$p_type.<span class="stringliteral">"';"</span>);
<a name="l00195"></a>00195   <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>=pg_fetch_array($Ret,0);
<a name="l00196"></a>00196   <span class="keywordflow">return</span> <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>[0];
<a name="l00197"></a>00197   <span class="comment">//return 0;</span>
<a name="l00198"></a>00198 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11"></a><!-- doxytag: member="user_menu.php::MenuAdmin" ref="a11" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">MenuAdmin           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
MenuAdmin 
<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00557">557</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>.<div class="fragment"><pre class="fragment"><a name="l00558"></a>00558 {
<a name="l00559"></a>00559   $item=array (array(<span class="stringliteral">"admin_repo.php?action=user_mgt"</span>,<span class="stringliteral">"Utilisateurs"</span>),
<a name="l00560"></a>00560                array(<span class="stringliteral">"admin_repo.php?action=dossier_mgt"</span>,<span class="stringliteral">"Dossiers"</span>),
<a name="l00561"></a>00561                array(<span class="stringliteral">"admin_repo.php?action=modele_mgt"</span>,<span class="stringliteral">"Modèles"</span>),
<a name="l00562"></a>00562                array(<span class="stringliteral">"login.php"</span>,<span class="stringliteral">"Accueil"</span>),
<a name="l00563"></a>00563                array(<span class="stringliteral">"logout.php"</span>,<span class="stringliteral">"Logout"</span>)
<a name="l00564"></a>00564                );
<a name="l00565"></a>00565 
<a name="l00566"></a>00566   $menu=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>($item,<span class="charliteral">'H'</span>);
<a name="l00567"></a>00567   <span class="keywordflow">return</span> $menu;
<a name="l00568"></a>00568 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14"></a><!-- doxytag: member="user_menu.php::MenuJrn" ref="a14" args="($p_dossier)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">MenuJrn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_dossier</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu in the jrn page. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_dossier</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00630">630</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="jrn__detail_8php-source.html#l00124">$l_line</a>, <a class="el" href="setup_8php-source.html#l00404">$Max</a>, <a class="el" href="line__update_8php-source.html#l00070">$Ret</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.<div class="fragment"><pre class="fragment"><a name="l00631"></a>00631 {
<a name="l00632"></a>00632     echo '&lt;TABLE&gt;';
<a name="l00633"></a>00633     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"jrn_add.php"</span>&gt;Création &lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00634"></a>00634     include_once(<span class="stringliteral">"postgres.php"</span>);
<a name="l00635"></a>00635     $Cn=<a class="code" href="postgres_8php.html#a1">DbConnect</a>($p_dossier);
<a name="l00636"></a>00636     <a class="code" href="line__update_8php.html#a8">$Ret</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($Cn,<span class="stringliteral">"select jrn_def_id,jrn_def_name,</span>
<a name="l00637"></a>00637 <span class="stringliteral">                             jrn_def_class_deb,jrn_def_class_cred,jrn_type_id,jrn_desc </span>
<a name="l00638"></a>00638 <span class="stringliteral">                             from jrn_def join jrn_type on jrn_def_type=jrn_type_id"</span>);
<a name="l00639"></a>00639     <a class="code" href="setup_8php.html#a11">$Max</a>=pg_NumRows($Ret);
<a name="l00640"></a>00640     <span class="keywordflow">for</span> ($i=0;$i&lt;$Max;$i++) {
<a name="l00641"></a>00641       <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>=pg_fetch_array($Ret,$i);
<a name="l00642"></a>00642       printf ('&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"jrn_detail.php?p_jrn=%s"</span>&gt;%s&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;',
<a name="l00643"></a>00643               $l_line['jrn_def_id'],$l_line['jrn_def_name']);
<a name="l00644"></a>00644 
<a name="l00645"></a>00645     }
<a name="l00646"></a>00646     echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00647"></a>00647 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9"></a><!-- doxytag: member="user_menu.php::ShowJrn" ref="a9" args="($p_menu=&quot;&quot;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowJrn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_menu</em> = <code>&quot;&quot;</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return a string containing the menu main menu when you click on Journaux. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_menu</em>&nbsp;</td><td>the current menu (selected)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>HTML Code</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00503">503</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="user__impress_8php-source.html#l00051">$p_array</a>, <a class="el" href="export__ouv_8php-source.html#l00077">$result</a>, and <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>.<div class="fragment"><pre class="fragment"><a name="l00504"></a>00504 {
<a name="l00505"></a>00505 
<a name="l00506"></a>00506  <a class="code" href="user__impress_8php.html#a2">$p_array</a>=array(
<a name="l00507"></a>00507                 array(<span class="stringliteral">"user_jrn.php?jrn_type=NONE"</span> ,<span class="stringliteral">"Grand Livre"</span>),
<a name="l00508"></a>00508                 array(<span class="stringliteral">"user_jrn.php?jrn_type=VEN"</span> ,<span class="stringliteral">"Entrée"</span>),
<a name="l00509"></a>00509                 array(<span class="stringliteral">"user_jrn.php?jrn_type=ACH"</span>,<span class="stringliteral">"Dépense"</span>),
<a name="l00510"></a>00510                 array(<span class="stringliteral">"user_jrn.php?jrn_type=FIN"</span>,<span class="stringliteral">"Financier"</span>),
<a name="l00511"></a>00511                 array(<span class="stringliteral">"user_jrn.php?jrn_type=OD"</span>,<span class="stringliteral">"Op. Diverses"</span>)
<a name="l00512"></a>00512                  );
<a name="l00513"></a>00513  <a class="code" href="export__ouv_8php.html#a9">$result</a>=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>($p_array,<span class="charliteral">'H'</span>,<span class="stringliteral">"cell"</span>,<span class="stringliteral">"mtitle"</span>,$p_menu);
<a name="l00514"></a>00514  <span class="keywordflow">return</span> <a class="code" href="export__ouv_8php.html#a9">$result</a>;
<a name="l00515"></a>00515 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8"></a><!-- doxytag: member="user_menu.php::ShowMenuAdvanced" ref="a8" args="($default=&quot;&quot;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuAdvanced           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>default</em> = <code>&quot;&quot;</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
build the menu of <a class="el" href="user__advanced_8php.html">user_advanced.php</a> 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$default</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the menu</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00477">477</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="stock_8php-source.html#l00067">$left_menu</a>, <a class="el" href="bank_8inc_8php-source.html#l00237">$r</a>, <a class="el" href="central__inc_8php-source.html#l00036">Centralise()</a>, and <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>.<div class="fragment"><pre class="fragment"><a name="l00477"></a>00477                                        {
<a name="l00478"></a>00478 <span class="comment">// Show the left menu</span>
<a name="l00479"></a>00479 <a class="code" href="stock_8php.html#a2">$left_menu</a>=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>(array(
<a name="l00480"></a>00480                           <span class="comment">//('rapprt.php','Rapprochement'),</span>
<a name="l00481"></a>00481                           array('jrn_update.php<span class="charliteral">','</span>Journaux'),
<a name="l00482"></a>00482                           array('user_advanced.php?p_action=periode<span class="charliteral">','</span>Periode'),
<a name="l00483"></a>00483                           array('central.php<span class="charliteral">','</span><a class="code" href="central__inc_8php.html#a0">Centralise</a>'),
<a name="l00484"></a>00484                           array('pcmn_update.php?p_start=1<span class="charliteral">','</span>Plan Comptable'),
<a name="l00485"></a>00485                           array('stock.php<span class="charliteral">','</span>Stock'),
<a name="l00486"></a>00486                           array('form.php<span class="charliteral">','</span>Rapport'),
<a name="l00487"></a>00487                           array('<span class="keyword">import</span>.php<span class="charliteral">','</span>Import Banque'),
<a name="l00488"></a>00488                           array('ecrit_ouv.php<span class="charliteral">','</span>Ecriture ouverture')
<a name="l00489"></a>00489                         
<a name="l00490"></a>00490                           ),
<a name="l00491"></a>00491                     <span class="charliteral">'H'</span>,<span class="stringliteral">"cell"</span>,<span class="stringliteral">"mtitle"</span>,$<span class="keywordflow">default</span>);
<a name="l00492"></a>00492  <a class="code" href="bank_8inc_8php.html#a29">$r</a>='&lt;div <span class="keyword">class</span>=<span class="stringliteral">"u_subtmenu"</span>&gt;'.$left_menu.<span class="stringliteral">"&lt;/div&gt;"</span>;
<a name="l00493"></a>00493 <span class="keywordflow">return</span> <a class="code" href="bank_8inc_8php.html#a29">$r</a>;
<a name="l00494"></a>00494 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2"></a><!-- doxytag: member="user_menu.php::ShowMenuCompta" ref="a2" args="($p_dossier, $p_high=&quot;&quot;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuCompta           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_dossier</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_high</em> = <code>&quot;&quot;</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
show the top menu for the user profile and highight the selected one 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_dossier</em>&nbsp;</td><td>$_SESSION['g_dossier'] </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_high</em>&nbsp;</td><td>what to hightlight, by default it is autodetected but sometimes it must be given. Default value="" </td></tr>
  </table>
</dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>clean param p_dossier</dd></dl>
<dl compact><dt><b>Returns:</b></dt><dd>none</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00132">132</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="user__impress_8php-source.html#l00059">$default</a>, <a class="el" href="user__impress_8php-source.html#l00051">$p_array</a>, <a class="el" href="bank_8inc_8php-source.html#l00237">$r</a>, <a class="el" href="export__ouv_8php-source.html#l00077">$result</a>, <a class="el" href="debug_8php-source.html#l00034">echo_debug()</a>, <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>, and <a class="el" href="tva_8inc_8php-source.html#l00215">width</a>.<div class="fragment"><pre class="fragment"><a name="l00133"></a>00133 {
<a name="l00134"></a>00134   include_once(<span class="stringliteral">"postgres.php"</span>);
<a name="l00135"></a>00135 
<a name="l00136"></a>00136   <span class="comment">// find our current menu</span>
<a name="l00137"></a>00137   <a class="code" href="user__impress_8php.html#a3">$default</a>=basename($_SERVER['SCRIPT_NAME']);
<a name="l00138"></a>00138   <span class="keywordflow">switch</span> ($<span class="keywordflow">default</span>) {
<a name="l00139"></a>00139   <span class="keywordflow">case</span> <span class="stringliteral">"user_jrn.php"</span>:
<a name="l00140"></a>00140     <a class="code" href="user__impress_8php.html#a3">$default</a>.=<span class="stringliteral">"?show"</span>;
<a name="l00141"></a>00141     <span class="keywordflow">break</span>;
<a name="l00142"></a>00142   <span class="keywordflow">case</span> <span class="stringliteral">"recherche.php"</span>:
<a name="l00143"></a>00143     <a class="code" href="user__impress_8php.html#a3">$default</a>.=<span class="stringliteral">"?p_dossier=$p_dossier"</span>;
<a name="l00144"></a>00144     <span class="keywordflow">break</span>;
<a name="l00145"></a>00145   <span class="keywordflow">case</span> <span class="stringliteral">"fiche.php"</span>:
<a name="l00146"></a>00146     <a class="code" href="user__impress_8php.html#a3">$default</a>.=<span class="stringliteral">"?p_dossier=$p_dossier"</span>;
<a name="l00147"></a>00147     <span class="keywordflow">break</span>;
<a name="l00148"></a>00148   }
<a name="l00149"></a>00149   <span class="keywordflow">if</span> ( $p_high !== <span class="stringliteral">""</span> ) <a class="code" href="user__impress_8php.html#a3">$default</a>=$p_high;
<a name="l00150"></a>00150 
<a name="l00151"></a>00151   <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,'defaut is '.$default);
<a name="l00152"></a>00152 
<a name="l00153"></a>00153   <a class="code" href="user__impress_8php.html#a2">$p_array</a>=array(array(<span class="stringliteral">"user_jrn.php?show"</span>,<span class="stringliteral">"Journaux"</span>,<span class="stringliteral">"Les journaux permettent d'encoder toutes les opérations"</span>),
<a name="l00154"></a>00154                  array(<span class="stringliteral">"recherche.php?p_dossier=$p_dossier"</span>,<span class="stringliteral">"Recherche"</span>,<span class="stringliteral">"Pour retrouver une opération"</span>),
<a name="l00155"></a>00155                  array(<span class="stringliteral">"fiche.php?p_dossier=$p_dossier"</span>,<span class="stringliteral">"Fiche"</span>,<span class="stringliteral">"Ajouter, modifier ou effacer des fiches"</span>),
<a name="l00156"></a>00156                  array(<span class="stringliteral">"user_impress.php"</span>,<span class="stringliteral">"Impression"</span>,<span class="stringliteral">"Impression"</span>),
<a name="l00157"></a>00157                  array(<span class="stringliteral">"user_advanced.php"</span>,<span class="stringliteral">"Avancé"</span>,<span class="stringliteral">"Opérations délicates"</span>),
<a name="l00158"></a>00158 
<a name="l00159"></a>00159                  array('user_pref.php<span class="charliteral">','</span>Preference',<span class="stringliteral">"Préférence de l'utilisateur"</span>),
<a name="l00160"></a>00160                  array('parametre.php?dos='.$_SESSION['g_dossier'],<span class="stringliteral">"Paramètre"</span>),
<a name="l00161"></a>00161                  array('commercial.php?dos='.$_SESSION['g_dossier'],<span class="stringliteral">"Gestion"</span>),
<a name="l00162"></a>00162                  array('login.php<span class="charliteral">','</span>Accueil',<span class="stringliteral">"Accueil"</span>),
<a name="l00163"></a>00163                  array('logout.php<span class="charliteral">','</span>logout',<span class="stringliteral">"Sortie"</span>)
<a name="l00164"></a>00164                  );
<a name="l00165"></a>00165 
<a name="l00166"></a>00166   <a class="code" href="export__ouv_8php.html#a9">$result</a>=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>($p_array,<span class="charliteral">'H'</span>,<span class="stringliteral">"mtitle"</span>,<span class="stringliteral">"mtitle"</span>,$<span class="keywordflow">default</span>,' <a class="code" href="tva_8inc_8php.html#a17">width</a>=<span class="stringliteral">"100%"</span>');
<a name="l00167"></a>00167 
<a name="l00168"></a>00168   <a class="code" href="bank_8inc_8php.html#a29">$r</a>=<span class="stringliteral">"&lt;H2 class=\"info\"&gt;Comptabilit&amp;eacute;  "</span>.$_SESSION['g_name'].<span class="stringliteral">" &lt;/H2&gt;"</span>;
<a name="l00169"></a>00169   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<a class="code" href="export__ouv_8php.html#a9">$result</a>;
<a name="l00170"></a>00170   <span class="keywordflow">return</span> <a class="code" href="bank_8inc_8php.html#a29">$r</a>;
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 
<a name="l00175"></a>00175 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16"></a><!-- doxytag: member="user_menu.php::ShowMenuComptaForm" ref="a16" args="($p_dossier)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuComptaForm           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_dossier</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the left menu for the report (add a report, view it). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_dossier</em>&nbsp;</td><td>dossier id</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00683">683</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="impress__fiche_8php-source.html#l00026">$cn</a>, <a class="el" href="jrn__detail_8php-source.html#l00124">$l_line</a>, <a class="el" href="setup_8php-source.html#l00404">$Max</a>, <a class="el" href="line__update_8php-source.html#l00070">$Ret</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.<div class="fragment"><pre class="fragment"><a name="l00683"></a>00683                                         {
<a name="l00684"></a>00684      <a class="code" href="impress__fiche_8php.html#a0">$cn</a>=<a class="code" href="postgres_8php.html#a1">DbConnect</a>($p_dossier);
<a name="l00685"></a>00685     echo '&lt;div <span class="keyword">class</span>=<span class="stringliteral">"lmenu"</span>&gt;';
<a name="l00686"></a>00686     echo '&lt;TABLE&gt;';
<a name="l00687"></a>00687     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"form.php?action=add"</span>&gt;Ajout&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00688"></a>00688     <a class="code" href="line__update_8php.html#a8">$Ret</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($cn,<span class="stringliteral">"select fr_id, fr_label </span>
<a name="l00689"></a>00689 <span class="stringliteral">                             from formdef order by fr_label"</span>);
<a name="l00690"></a>00690     <a class="code" href="setup_8php.html#a11">$Max</a>=pg_NumRows($Ret);
<a name="l00691"></a>00691     <span class="keywordflow">for</span> ($i=0;$i&lt;$Max;$i++) {
<a name="l00692"></a>00692       <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>=pg_fetch_array($Ret,$i);
<a name="l00693"></a>00693       printf ('&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"form.php?action=view&amp;fr_id=%s"</span>&gt;%s&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;',
<a name="l00694"></a>00694               $l_line['fr_id'],$l_line['fr_label']);
<a name="l00695"></a>00695 
<a name="l00696"></a>00696     }
<a name="l00697"></a>00697     echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00698"></a>00698     echo '&lt;/div&gt;';
<a name="l00699"></a>00699 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12"></a><!-- doxytag: member="user_menu.php::ShowMenuDocument" ref="a12" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuDocument           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
: Display Document's menu 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>none</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00577">577</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>.<div class="fragment"><pre class="fragment"><a name="l00578"></a>00578 {
<a name="l00579"></a>00579   $base=<span class="stringliteral">"parametre.php?p_action=document&amp;sa="</span>;
<a name="l00580"></a>00580   $sub_menu=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>(
<a name="l00581"></a>00581                      array(array($base.<span class="stringliteral">"add_document"</span>,<span class="stringliteral">"Ajout"</span>))
<a name="l00582"></a>00582                      ,<span class="charliteral">'V'</span>,<span class="stringliteral">"cell"</span>,<span class="stringliteral">"mtitle"</span>);
<a name="l00583"></a>00583   <span class="keywordflow">return</span> $sub_menu;
<a name="l00584"></a>00584 
<a name="l00585"></a>00585 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10"></a><!-- doxytag: member="user_menu.php::ShowMenuFiche" ref="a10" args="($p_dossier)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuFiche           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_dossier</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu for the card management. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_dossier</em>&nbsp;</td><td>dossier 1</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>
<dl compact><dt><b><a class="el" href="todo.html#_todo000017">Todo:</a></b></dt><dd>Only for developper A test must be added </dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00527">527</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="impress__fiche_8php-source.html#l00026">$cn</a>, <a class="el" href="jrn__detail_8php-source.html#l00124">$l_line</a>, <a class="el" href="setup_8php-source.html#l00404">$Max</a>, <a class="el" href="depense_8inc_8php-source.html#l00077">$Res</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.<div class="fragment"><pre class="fragment"><a name="l00528"></a>00528 {
<a name="l00529"></a>00529      <a class="code" href="impress__fiche_8php.html#a0">$cn</a>=<a class="code" href="postgres_8php.html#a1">DbConnect</a>($p_dossier);
<a name="l00530"></a>00530      echo '&lt;div <span class="keyword">class</span>=<span class="stringliteral">"lmenu"</span>&gt;';
<a name="l00531"></a>00531      echo '&lt;TABLE&gt;';
<a name="l00534"></a>00534       echo '&lt;TR&gt;&lt;TD colspan=<span class="stringliteral">"3"</span> <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;
<a name="l00535"></a>00535           &lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"fiche.php?action=add_modele&amp;fiche=modele"</span>&gt;Creation&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00536"></a>00536      <a class="code" href="depense_8inc_8php.html#a4">$Res</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($cn,<span class="stringliteral">"select fd_id,fd_label from fiche_def order by fd_label"</span>);
<a name="l00537"></a>00537      <a class="code" href="setup_8php.html#a11">$Max</a>=pg_NumRows($Res);
<a name="l00538"></a>00538      <span class="keywordflow">for</span> ( $i=0; $i &lt; $Max;$i++) {
<a name="l00539"></a>00539        <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>=pg_fetch_array($Res,$i);
<a name="l00540"></a>00540        printf('&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"cell"</span>&gt;%s&lt;/TD&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mshort"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"fiche.php?action=vue&amp;fiche=%d"</span>&gt;Voir&lt;/A&gt;
<a name="l00541"></a>00541                &lt;/TD&gt;
<a name="l00542"></a>00542                &lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mshort"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"fiche.php?action=modifier&amp;fiche=%d"</span>&gt;Modifier&lt;/A&gt;&lt;/TD&gt;
<a name="l00543"></a>00543                &lt;/TR&gt;',
<a name="l00544"></a>00544             $l_line['fd_label'],
<a name="l00545"></a>00545             $l_line['fd_id'],
<a name="l00546"></a>00546             $l_line['fd_id']);
<a name="l00547"></a>00547      }
<a name="l00548"></a>00548      echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00549"></a>00549      echo '&lt;/div&gt;';
<a name="l00550"></a>00550 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17"></a><!-- doxytag: member="user_menu.php::ShowMenuImport" ref="a17" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuImport           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu for importing, verify and transfert Bank CSV. 
<p>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00706">706</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.<div class="fragment"><pre class="fragment"><a name="l00706"></a>00706                          {
<a name="l00707"></a>00707     echo '&lt;TABLE&gt;';
<a name="l00708"></a>00708     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"import.php?action=import"</span>&gt;Importer CSV&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00709"></a>00709     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"import.php?action=verif"</span>&gt;Verif CSV&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00710"></a>00710     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"import.php?action=transfer"</span>&gt;Transfert CSV&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00711"></a>00711     
<a name="l00712"></a>00712     echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00713"></a>00713 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5"></a><!-- doxytag: member="user_menu.php::ShowMenuJrn" ref="a5" args="($p_cn, $p_jrn_type, $p_jrn)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuJrn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_cn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_jrn_type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_jrn</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu of the jrn depending of its type, check with the security. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>p_cn</em>&nbsp;</td><td>database connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_jrn_type</em>&nbsp;</td><td>type of the ledger </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_jrn</em>&nbsp;</td><td>jrn id</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string containing the menu</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00300">300</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="periode_8inc_8php-source.html#l00031">$action</a>, <a class="el" href="jrn__add_8php-source.html#l00172">$num</a>, <a class="el" href="depense_8inc_8php-source.html#l00077">$Res</a>, <a class="el" href="impress__bilan_8php-source.html#l00032">$ret</a>, <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>, and <a class="el" href="user__menu_8php-source.html#l00342">get_quick_key()</a>.<div class="fragment"><pre class="fragment"><a name="l00301"></a>00301 {
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <a class="code" href="depense_8inc_8php.html#a4">$Res</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($p_cn,<span class="stringliteral">"select ja_name,ja_url,ja_action,ja_desc from jrn_action  where ja_jrn_type='$p_jrn_type'</span>
<a name="l00304"></a>00304 <span class="stringliteral">                      order by ja_id"</span>);
<a name="l00305"></a>00305   <a class="code" href="jrn__add_8php.html#a17">$num</a>=pg_NumRows($Res);
<a name="l00306"></a>00306   <span class="keywordflow">if</span> ($num==0)    <span class="keywordflow">return</span> <span class="stringliteral">""</span>;
<a name="l00307"></a>00307   <span class="comment">// Retrieve in the database the menu</span>
<a name="l00308"></a>00308   <a class="code" href="impress__bilan_8php.html#a0">$ret</a>=<span class="stringliteral">"&lt;TABLE&gt;"</span>;
<a name="l00309"></a>00309   $access_key_list = array();
<a name="l00310"></a>00310   <span class="keywordflow">for</span> ($i=0;$i&lt;$num;$i++) {
<a name="l00311"></a>00311     <a class="code" href="periode_8inc_8php.html#a1">$action</a>=pg_fetch_array($Res,$i);
<a name="l00312"></a>00312     $access_key=<a class="code" href="user__menu_8php.html#a6">get_quick_key</a>($<a class="code" href="classaction.html">action</a>['ja_name'],$access_key_list);
<a name="l00313"></a>00313     $lib=str_replace($access_key,'&lt;u&gt;'.$access_key.'&lt;/u&gt;',$<a class="code" href="classaction.html">action</a>['ja_name']);
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <a class="code" href="impress__bilan_8php.html#a0">$ret</a>.=sprintf('&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"cell"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> accesskey=<span class="stringliteral">"%s"</span> title=<span class="stringliteral">"%s"</span> '.
<a name="l00316"></a>00316                   'HREF=<span class="stringliteral">"%s?%s&amp;p_jrn=%s&amp;jrn_type=%s"</span>&gt;%s&lt;/A&gt;&lt;/td&gt;&lt;/tR&gt;',
<a name="l00317"></a>00317                   $access_key, 
<a name="l00318"></a>00318                   $<a class="code" href="classaction.html">action</a>['ja_desc'], 
<a name="l00319"></a>00319                   $<a class="code" href="classaction.html">action</a>['ja_url'],
<a name="l00320"></a>00320                   $<a class="code" href="classaction.html">action</a>['ja_action'], 
<a name="l00321"></a>00321                   $p_jrn, 
<a name="l00322"></a>00322                   $_REQUEST['jrn_type'],
<a name="l00323"></a>00323                   $lib);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325   }
<a name="l00326"></a>00326   <a class="code" href="impress__bilan_8php.html#a0">$ret</a>.='&lt;/TABLE&gt;';
<a name="l00327"></a>00327   <span class="keywordflow">return</span> <a class="code" href="impress__bilan_8php.html#a0">$ret</a>;
<a name="l00328"></a>00328 
<a name="l00329"></a>00329 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4"></a><!-- doxytag: member="user_menu.php::ShowMenuJrnUser" ref="a4" args="($p_dossier, $p_type, $p_jrn, $p_extra=&quot;&quot;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuJrnUser           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_dossier</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_jrn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_extra</em> = <code>&quot;&quot;</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the Menu from the jrn encode page. 
<p>
ShowMenuJrnUser($p_dossier,$p_type,$p_jrn)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_dossier</em>&nbsp;</td><td>number </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_type</em>&nbsp;</td><td>type of journal (VEN,ACH,BQE,ODS) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_jrn</em>&nbsp;</td><td>journal </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_extra</em>&nbsp;</td><td>html code to add at the return (before the &lt;/table&gt;) </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>string with table in HTML </dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>we use the SCRIPT_NAME variable to build the href value but we need to add a parameter when the REQUEST_url is <a class="el" href="commercial_8php.html">commercial.php</a></dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00213">213</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="jrn__detail_8php-source.html#l00124">$l_line</a>, <a class="el" href="setup_8php-source.html#l00404">$Max</a>, <a class="el" href="line__update_8php-source.html#l00070">$Ret</a>, <a class="el" href="user__sec_8php-source.html#l00175">$right</a>, <a class="el" href="user__action__ach_8php-source.html#l00167">$User</a>, <a class="el" href="check__priv_8php-source.html#l00046">CheckJrn()</a>, <a class="el" href="postgres_8php-source.html#l00072">DbConnect()</a>, <a class="el" href="debug_8php-source.html#l00034">echo_debug()</a>, and <a class="el" href="postgres_8php-source.html#l00099">ExecSql()</a>.<div class="fragment"><pre class="fragment"><a name="l00214"></a>00214 {
<a name="l00215"></a>00215   include_once (<span class="stringliteral">"debug.php"</span>);
<a name="l00216"></a>00216   include_once(<span class="stringliteral">"constant.php"</span>);
<a name="l00217"></a>00217   include_once(<span class="stringliteral">"class_user.php"</span>);
<a name="l00218"></a>00218   <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,<span class="stringliteral">"U_SHOWMENUJRNUSER PTYPE=$p_type"</span>);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220   echo '&lt;TABLE&gt;&lt;TR&gt;';
<a name="l00221"></a>00221   include_once(<span class="stringliteral">"postgres.php"</span>);
<a name="l00222"></a>00222   
<a name="l00223"></a>00223   
<a name="l00224"></a>00224   $Cn=<a class="code" href="postgres_8php.html#a1">DbConnect</a>($p_dossier);
<a name="l00225"></a>00225   
<a name="l00226"></a>00226   <a class="code" href="user__action__ach_8php.html#a11">$User</a>=<span class="keyword">new</span> <a class="code" href="classcl__user.html">cl_user</a>($Cn);
<a name="l00227"></a>00227   <a class="code" href="user__action__ach_8php.html#a11">$User</a>-&gt;Check();
<a name="l00228"></a>00228   <span class="keywordflow">if</span> ( $User-&gt;Admin() ==0) {
<a name="l00229"></a>00229     <a class="code" href="line__update_8php.html#a8">$Ret</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($Cn,<span class="stringliteral">"select jrn_def_id,jrn_def_type,jrn_def_name,jrn_def_class_deb,jrn_def_class_cred,jrn_type_id,jrn_desc,uj_priv,</span>
<a name="l00230"></a>00230 <span class="stringliteral">                               jrn_deb_max_line,jrn_cred_max_line</span>
<a name="l00231"></a>00231 <span class="stringliteral">                             from jrn_def join jrn_type on jrn_def_type=jrn_type_id</span>
<a name="l00232"></a>00232 <span class="stringliteral">                             join user_sec_jrn on uj_jrn_id=jrn_def_id </span>
<a name="l00233"></a>00233 <span class="stringliteral">                             where</span>
<a name="l00234"></a>00234 <span class="stringliteral">                             uj_login='"</span>.$User-&gt;id.<span class="stringliteral">"'</span>
<a name="l00235"></a>00235 <span class="stringliteral">                             and uj_priv !='X'</span>
<a name="l00236"></a>00236 <span class="stringliteral">                             and jrn_def_type='$p_type' order by jrn_Def_id</span>
<a name="l00237"></a>00237 <span class="stringliteral">                             "</span>);
<a name="l00238"></a>00238     } <span class="keywordflow">else</span> {
<a name="l00239"></a>00239       <a class="code" href="line__update_8php.html#a8">$Ret</a>=<a class="code" href="postgres_8php.html#a2">ExecSql</a>($Cn,<span class="stringliteral">"select jrn_def_id,jrn_def_type,jrn_def_name,jrn_def_class_deb,jrn_def_class_cred,jrn_deb_max_line,jrn_cred_max_line,</span>
<a name="l00240"></a>00240 <span class="stringliteral">                            jrn_type_id,jrn_desc,'W' as uj_priv</span>
<a name="l00241"></a>00241 <span class="stringliteral">                             from jrn_def join jrn_type on jrn_def_type=jrn_type_id where</span>
<a name="l00242"></a>00242 <span class="stringliteral">                              jrn_def_type='$p_type' order by jrn_Def_id"</span>);
<a name="l00243"></a>00243 
<a name="l00244"></a>00244     } 
<a name="l00245"></a>00245     <a class="code" href="setup_8php.html#a11">$Max</a>=pg_NumRows($Ret);
<a name="l00246"></a>00246     include_once(<span class="stringliteral">"check_priv.php"</span>);
<a name="l00247"></a>00247 
<a name="l00248"></a>00248     <span class="keywordflow">for</span> ($i=0;$i&lt;$Max;$i++) {
<a name="l00249"></a>00249       <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>=pg_fetch_array($Ret,$i);
<a name="l00250"></a>00250       <span class="comment">// Admin have always rights</span>
<a name="l00251"></a>00251       <span class="keywordflow">if</span> ( $User-&gt;Admin() == 0 ){
<a name="l00252"></a>00252         <a class="code" href="user__sec_8php.html#a15">$right</a>=<a class="code" href="check__priv_8php.html#a0">CheckJrn</a>($p_dossier,$_SESSION['g_user'],$l_line['jrn_def_id']);
<a name="l00253"></a>00253       }<span class="keywordflow">else</span> {
<a name="l00254"></a>00254         <a class="code" href="user__sec_8php.html#a15">$right</a>=3;
<a name="l00255"></a>00255       }
<a name="l00256"></a>00256 
<a name="l00257"></a>00257       <span class="keywordflow">if</span> ( $right &gt; 0 ) {
<a name="l00258"></a>00258         <span class="comment">// Minimum Lecture </span>
<a name="l00259"></a>00259         <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,<span class="stringliteral">"p_jrn = $p_jrn "</span>);
<a name="l00260"></a>00260         <span class="keywordflow">if</span> ( $l_line['jrn_def_id'] != $p_jrn ) {
<a name="l00261"></a>00261           $href=basename($_SERVER[<span class="stringliteral">"SCRIPT_NAME"</span>]);
<a name="l00262"></a>00262           $add=<span class="stringliteral">""</span>;
<a name="l00263"></a>00263           <span class="comment">// if the SCRIPT_NAME == commercial.php, we need to add the parameter</span>
<a name="l00264"></a>00264           <span class="comment">// p_action=facture</span>
<a name="l00265"></a>00265           <span class="keywordflow">if</span> ( $href==<span class="stringliteral">"commercial.php"</span> ) 
<a name="l00266"></a>00266             {
<a name="l00267"></a>00267               $add='&amp;p_action='.$_REQUEST['p_action'];
<a name="l00268"></a>00268             }
<a name="l00269"></a>00269           echo '&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"cell"</span>&gt;';
<a name="l00270"></a>00270           printf ('&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"%s?jrn_type=%s&amp;p_jrn=%s%s"</span>&gt;%s&lt;/A&gt;&lt;/TD&gt;',
<a name="l00271"></a>00271                   $href,
<a name="l00272"></a>00272                   $l_line['jrn_def_type'],
<a name="l00273"></a>00273                   $l_line['jrn_def_id'],
<a name="l00274"></a>00274                   $add,
<a name="l00275"></a>00275                   $l_line['jrn_def_name']
<a name="l00276"></a>00276                   );
<a name="l00277"></a>00277         } <span class="keywordflow">else</span>
<a name="l00278"></a>00278           {
<a name="l00279"></a>00279             echo '&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"selectedcell"</span>&gt;'. <a class="code" href="jrn__detail_8php.html#a11">$l_line</a>['jrn_def_name'].'&lt;/TD&gt;';
<a name="l00280"></a>00280           }
<a name="l00281"></a>00281       }<span class="comment">// if right</span>
<a name="l00282"></a>00282     }<span class="comment">// for</span>
<a name="l00283"></a>00283     <span class="keywordflow">if</span> ( $p_extra !=<span class="stringliteral">""</span> ) echo $p_extra;
<a name="l00284"></a>00284     echo '&lt;/TR&gt;';
<a name="l00285"></a>00285     echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00286"></a>00286     <span class="comment">//echo '&lt;/div&gt;';</span>
<a name="l00287"></a>00287 
<a name="l00288"></a>00288 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13"></a><!-- doxytag: member="user_menu.php::ShowMenuParam" ref="a13" args="($p_action=&quot;&quot;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuParam           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_action</em> = <code>&quot;&quot;</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the parameter menu. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_action</em>&nbsp;</td><td>the last action choosed</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>HTML Code</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00597">597</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="ac__common_8php-source.html#l00226">ShowItem()</a>, and <a class="el" href="tva_8inc_8php-source.html#l00215">width</a>.<div class="fragment"><pre class="fragment"><a name="l00598"></a>00598 {
<a name="l00599"></a>00599     $sub_menu=<a class="code" href="ac__common_8php.html#a10">ShowItem</a>(array(
<a name="l00600"></a>00600                           
<a name="l00601"></a>00601                           array('parametre.php?p_action=company<span class="charliteral">','</span>Sociétés'),
<a name="l00602"></a>00602                           array('parametre.php?p_action=devise<span class="charliteral">','</span>Devises'),
<a name="l00603"></a>00603                           array('parametre.php?p_action=tva<span class="charliteral">','</span>Tva'),
<a name="l00604"></a>00604                           array('parametre.php?p_action=<a class="code" href="classposte.html">poste</a><span class="charliteral">','</span>Poste Comptable'),
<a name="l00605"></a>00605                           array('parametre.php?p_action=<a class="code" href="classfiche.html">fiche</a><span class="charliteral">','</span>Fiche'),
<a name="l00606"></a>00606                           array('user_sec.php<span class="charliteral">','</span>Sécurité'),
<a name="l00607"></a>00607                           array('parametre.php?p_action=document<span class="charliteral">','</span><a class="code" href="classDocument.html">Document</a>'),
<a name="l00608"></a>00608                           array('commercial.php?dos='.$_SESSION['g_dossier'],<span class="stringliteral">"Gestion"</span>),
<a name="l00609"></a>00609                           array('user_compta.php?dos='.$_SESSION['g_dossier'],<span class="stringliteral">"Comptabilité"</span>),
<a name="l00610"></a>00610 
<a name="l00611"></a>00611                           array('login.php<span class="charliteral">','</span>Accueil',<span class="stringliteral">"Accueil"</span>),
<a name="l00612"></a>00612                           array('logout.php<span class="charliteral">','</span>logout',<span class="stringliteral">"Sortie"</span>)
<a name="l00613"></a>00613                           ),
<a name="l00614"></a>00614                     <span class="charliteral">'H'</span>,<span class="stringliteral">"mtitle"</span>,<span class="stringliteral">"mtitle"</span>,$p_action,' <a class="code" href="tva_8inc_8php.html#a17">width</a>=<span class="stringliteral">"100%"</span>');
<a name="l00615"></a>00615     <span class="keywordflow">return</span> $sub_menu;
<a name="l00616"></a>00616 
<a name="l00617"></a>00617 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15"></a><!-- doxytag: member="user_menu.php::ShowMenuPcmn" ref="a15" args="($p_start=1)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ShowMenuPcmn           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>p_start</em> = <code>1</code>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show the menu from the pcmn page. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_start</em>&nbsp;</td><td>class start default=1</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>nothing</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00660">660</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.<div class="fragment"><pre class="fragment"><a name="l00661"></a>00661 {
<a name="l00662"></a>00662     echo '&lt;TABLE&gt;';
<a name="l00663"></a>00663     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>  HREF=<span class="stringliteral">"pcmn_update.php?p_start=1"</span>&gt;1 Immobilisé &lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00664"></a>00664     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>  HREF=<span class="stringliteral">"pcmn_update.php?p_start=2"</span>&gt;2 Actif a un an au plus&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00665"></a>00665     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>  HREF=<span class="stringliteral">"pcmn_update.php?p_start=3"</span>&gt;3 Stock et commande&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00666"></a>00666     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>  HREF=<span class="stringliteral">"pcmn_update.php?p_start=4"</span>&gt;4 Compte tiers&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00667"></a>00667     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"pcmn_update.php?p_start=5"</span>&gt;5 Actif&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00668"></a>00668     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>  HREF=<span class="stringliteral">"pcmn_update.php?p_start=6"</span>&gt;6 Charges&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00669"></a>00669     echo '&lt;TR&gt;&lt;TD <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span>&gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"pcmn_update.php?p_start=7"</span>&gt;7 Produits&lt;/A&gt;&lt;/TD&gt;&lt;/TR&gt;';
<a name="l00670"></a>00670     echo <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00671"></a>00671 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0"></a><!-- doxytag: member="user_menu.php::u_ShowDossier" ref="a0" args="($p_user, $p_admin)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_ShowDossier           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_user</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_admin</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Show all the available folder for the users at the login page. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>$p_user</em>&nbsp;</td><td>user </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_admin</em>&nbsp;</td><td>1 if admin</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>table in HTML</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00037">37</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="admin__repo_8php-source.html#l00119">$desc</a>, <a class="el" href="balance_8php-source.html#l00118">$i</a>, <a class="el" href="user__impress_8php-source.html#l00051">$p_array</a>, <a class="el" href="export__ouv_8php-source.html#l00077">$result</a>, <a class="el" href="balance_8php-source.html#l00124">$tr</a>, and <a class="el" href="user__menu_8php-source.html#l00090">GetAvailableFolder()</a>.<div class="fragment"><pre class="fragment"><a name="l00038"></a>00038 {
<a name="l00039"></a>00039   <a class="code" href="user__impress_8php.html#a2">$p_array</a>=<a class="code" href="user__menu_8php.html#a1">GetAvailableFolder</a>($p_user,$p_admin);   
<a name="l00040"></a>00040   <span class="keywordflow">if</span> ( $p_array == 0 ) <span class="keywordflow">return</span> <span class="stringliteral">" * Aucun dossier *"</span>;
<a name="l00041"></a>00041   <a class="code" href="export__ouv_8php.html#a9">$result</a>=<span class="stringliteral">""</span>;
<a name="l00042"></a>00042   <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;table border=\"0\"&gt;"</span>;
<a name="l00043"></a>00043   <a class="code" href="export__ouv_8php.html#a9">$result</a>.='&lt;TR&gt;';
<a name="l00044"></a>00044     <span class="keywordflow">if</span> ( $p_admin == 1 ) {
<a name="l00045"></a>00045       <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;TD  class=\"mtitle\" &gt;&lt;A class=\"mtitle\" HREF=\"admin_repo.php\"&gt; Administration  &lt;/A&gt;&lt;/TD&gt;"</span>;
<a name="l00046"></a>00046     }
<a name="l00047"></a>00047     <a class="code" href="export__ouv_8php.html#a9">$result</a>.='&lt;TD  <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> &gt;&lt;A <span class="keyword">class</span>=<span class="stringliteral">"mtitle"</span> HREF=<span class="stringliteral">"logout.php"</span> &gt; Sortir&lt;/a&gt;&lt;/TD&gt;';
<a name="l00048"></a>00048     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00049"></a>00049   <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/table&gt;"</span>;
<a name="l00050"></a>00050   <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;TABLE&gt;"</span>;
<a name="l00051"></a>00051   <span class="keywordflow">for</span> ($i=0;$i&lt;<span class="keyword">sizeof</span>($p_array);$i++) {
<a name="l00052"></a>00052     $id=<a class="code" href="user__impress_8php.html#a2">$p_array</a>[<a class="code" href="balance_8php.html#a12">$i</a>]['dos_id'];
<a name="l00053"></a>00053     $name= <a class="code" href="user__impress_8php.html#a2">$p_array</a>[<a class="code" href="balance_8php.html#a12">$i</a>]['dos_name'];
<a name="l00054"></a>00054     <a class="code" href="admin__repo_8php.html#a9">$desc</a>=<a class="code" href="user__impress_8php.html#a2">$p_array</a>[<a class="code" href="balance_8php.html#a12">$i</a>]['dos_description'];
<a name="l00055"></a>00055     <span class="keywordflow">if</span> ( $i%2 == 0) 
<a name="l00056"></a>00056       <a class="code" href="balance_8php.html#a13">$tr</a>=<span class="stringliteral">"odd"</span>;
<a name="l00057"></a>00057     <span class="keywordflow">else</span> <a class="code" href="balance_8php.html#a13">$tr</a>=<span class="stringliteral">"even"</span>;
<a name="l00058"></a>00058 
<a name="l00059"></a>00059     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;TR class=\"$tr\"&gt;&lt;TD class=\"$tr\"&gt;"</span>;
<a name="l00060"></a>00060     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=$id.<span class="stringliteral">"  &lt;B&gt;$name&lt;/B&gt;"</span>;
<a name="l00061"></a>00061     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TD&gt;&lt;TD class=\"$tr\"&gt;"</span>;
<a name="l00062"></a>00062     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<a class="code" href="admin__repo_8php.html#a9">$desc</a>;
<a name="l00063"></a>00063     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TD&gt;&lt;TD class=\"mtitle\"&gt;"</span>;
<a name="l00064"></a>00064     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;A class=\"mtitle\" HREF=\"user_compta.php?dos=$id\"&gt;Comptabilité&lt;/A&gt;"</span>;
<a name="l00065"></a>00065     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TD&gt;"</span>;
<a name="l00066"></a>00066     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;TD class=\"mtitle\"&gt;"</span>;
<a name="l00067"></a>00067     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;A class=\"mtitle\" HREF=\"commercial.php?dos=$id\"&gt;Gestion&lt;/A&gt;"</span>;
<a name="l00068"></a>00068     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TD&gt;"</span>;
<a name="l00069"></a>00069     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;TD class=\"mtitle\"&gt;"</span>;
<a name="l00070"></a>00070     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;A class=\"mtitle\" HREF=\"parametre.php?dos=$id\"&gt;Paramètres&lt;/A&gt;"</span>;
<a name="l00071"></a>00071     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TD&gt;"</span>;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073     <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00074"></a>00074   }
<a name="l00075"></a>00075   <a class="code" href="export__ouv_8php.html#a9">$result</a>.=<span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00076"></a>00076   <span class="keywordflow">return</span> <a class="code" href="export__ouv_8php.html#a9">$result</a>;
<a name="l00077"></a>00077 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7"></a><!-- doxytag: member="user_menu.php::u_ShowMenuRecherche" ref="a7" args="($p_cn, $p_jrn, $p_sessid, $p_array=null)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u_ShowMenuRecherche           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_cn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_jrn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_sessid</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>$&nbsp;</td>
          <td class="mdname" nowrap> <em>p_array</em> = <code>null</code></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the form for the search (module accountancy). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>:</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_cn</em>&nbsp;</td><td>database connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_jrn</em>&nbsp;</td><td>jrn id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>$p_array=null</em>&nbsp;</td><td>previous search</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>HTML Code</dd></dl>

<p>
Definition at line <a class="el" href="user__menu_8php-source.html#l00372">372</a> of file <a class="el" href="user__menu_8php-source.html">user_menu.php</a>.
<p>
References <a class="el" href="jrn__search_8php-source.html#l00050">$opt</a>, <a class="el" href="bank_8inc_8php-source.html#l00237">$r</a>, <a class="el" href="bank_8inc_8php-source.html#l00161">$sp</a>, <a class="el" href="debug_8php-source.html#l00034">echo_debug()</a>, <a class="el" href="pref_8inc_8php-source.html#l00048">METHOD</a>, <a class="el" href="action_8inc_8php-source.html#l00240">name</a>, <a class="el" href="tva_8inc_8php-source.html#l00212">size</a>, and <a class="el" href="action_8inc_8php-source.html#l00241">value</a>.<div class="fragment"><pre class="fragment"><a name="l00373"></a>00373 {
<a name="l00374"></a>00374   <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,<span class="stringliteral">"u_ShowMenuRecherche($p_cn,$p_array)"</span>);
<a name="l00375"></a>00375   <span class="keywordflow">if</span> ( $p_array != null ) {
<a name="l00376"></a>00376     foreach ( $p_array as $key=&gt; $element) {
<a name="l00377"></a>00377       ${<span class="stringliteral">"p_$key"</span>}=$element;
<a name="l00378"></a>00378       <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,<span class="stringliteral">"p_$key =$element;"</span>);
<a name="l00379"></a>00379     }
<a name="l00380"></a>00380   }
<a name="l00381"></a>00381 
<a name="l00382"></a>00382   <span class="comment">// Find the journal property</span>
<a name="l00383"></a>00383   <span class="comment">//  $JrnProperty=GetJrnProperty($p_cn,$p_jrn);</span>
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   <a class="code" href="jrn__search_8php.html#a3">$opt</a>='&lt;OPTION VALUE=<span class="stringliteral">"="</span>&gt; =';
<a name="l00386"></a>00386   <a class="code" href="jrn__search_8php.html#a3">$opt</a>.='&lt;OPTION VALUE=<span class="stringliteral">"&lt;="</span>&gt; &lt;=';
<a name="l00387"></a>00387   <a class="code" href="jrn__search_8php.html#a3">$opt</a>.='&lt;OPTION VALUE=<span class="stringliteral">"&lt;"</span>&gt; &lt;';
<a name="l00388"></a>00388   <a class="code" href="jrn__search_8php.html#a3">$opt</a>.='&lt;OPTION VALUE=<span class="stringliteral">"&gt;"</span>&gt; &gt;';
<a name="l00389"></a>00389   <a class="code" href="jrn__search_8php.html#a3">$opt</a>.='&lt;OPTION VALUE=<span class="stringliteral">"&gt;="</span>&gt; &gt;=';
<a name="l00390"></a>00390   <span class="keywordflow">if</span> ( ! isset ($p_date_start)) $p_date_start=<span class="stringliteral">""</span>;
<a name="l00391"></a>00391   <span class="keywordflow">if</span> ( ! isset ($p_date_end))   $p_date_end=<span class="stringliteral">""</span>;
<a name="l00392"></a>00392   <span class="keywordflow">if</span> ( ! isset ($p_mont_sel))$p_mont_sel=<span class="stringliteral">""</span>;
<a name="l00393"></a>00393   <span class="keywordflow">if</span> ( ! isset ($p_s_comment))$p_s_comment=<span class="stringliteral">""</span>;
<a name="l00394"></a>00394   <span class="keywordflow">if</span> ( ! isset ($p_s_montant)) $p_s_montant=<span class="stringliteral">""</span>;
<a name="l00395"></a>00395   <span class="keywordflow">if</span> ( ! isset ($p_s_internal)) $p_s_internal=<span class="stringliteral">""</span>;
<a name="l00396"></a>00396   <span class="keywordflow">if</span> ( ! isset ($p_poste)) $p_poste=<span class="stringliteral">""</span>;
<a name="l00397"></a>00397   <span class="keywordflow">if</span> ( ! isset ($p_qcode)) $p_qcode=<span class="stringliteral">""</span>;
<a name="l00398"></a>00398 
<a name="l00399"></a>00399 
<a name="l00400"></a>00400   <span class="keywordflow">if</span> ( $p_mont_sel != <span class="stringliteral">""</span> )  <a class="code" href="jrn__search_8php.html#a3">$opt</a>.='&lt;OPTION <a class="code" href="action_8inc_8php.html#a19">value</a>=<span class="stringliteral">"'.$p_mont_sel.'"</span> SELECTED&gt; '.$p_mont_sel;
<a name="l00401"></a>00401   <a class="code" href="bank_8inc_8php.html#a29">$r</a>=<span class="stringliteral">""</span>;
<a name="l00402"></a>00402  
<a name="l00403"></a>00403   <span class="comment">//  $r.= '&lt;div style="border-style:outset;border-width:1pt;"&gt;';</span>
<a name="l00404"></a>00404 
<a name="l00405"></a>00405   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<a class="code" href="constant_8php.html#a79">JS_SEARCH_POSTE</a>;
<a name="l00406"></a>00406   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<a class="code" href="constant_8php.html#a85">JS_SEARCH_CARD</a>;
<a name="l00407"></a>00407   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;B&gt;Recherche&lt;/B&gt;"</span>;
<a name="l00408"></a>00408   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;<a class="code" href="constant_8php.html#a7">FORM</a> <a class="code" href="constant_8php.html#a44">ACTION</a>=<span class="stringliteral">"recherche.php"</span> <a class="code" href="pref_8inc_8php.html#a0">METHOD</a>=<span class="stringliteral">"GET"</span>&gt;';
<a name="l00409"></a>00409   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<span class="stringliteral">"&lt;table&gt;&lt;tr&gt;&lt;TD&gt;"</span>;  
<a name="l00410"></a>00410   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TABLE&gt;';
<a name="l00411"></a>00411   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;TR&gt;"</span>;
<a name="l00412"></a>00412   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD COLSPAN=<span class="stringliteral">"3"</span>&gt;  Date compris entre&lt;/TD&gt; ';
<a name="l00413"></a>00413   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt; &lt;TR&gt;"</span>;
<a name="l00414"></a>00414   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD&gt; &lt;INPUT TYPE=<span class="stringliteral">"TEXT"</span> NAME=<span class="stringliteral">"date_start"</span> SIZE=<span class="stringliteral">"10"</span> VALUE=<span class="stringliteral">"'.$p_date_start.'"</span>&gt;&lt;/TD&gt;';
<a name="l00415"></a>00415   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD&gt; &lt;INPUT TYPE=<span class="stringliteral">"TEXT"</span> NAME=<span class="stringliteral">"date_end"</span> <a class="code" href="tva_8inc_8php.html#a15">size</a>=<span class="stringliteral">"10"</span> Value=<span class="stringliteral">"'.$p_date_end.'"</span>&gt;&lt;/TD&gt;';
<a name="l00416"></a>00416   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;/TD&gt;&lt;TD&gt;';
<a name="l00417"></a>00417   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt; &lt;TR&gt;"</span>;
<a name="l00418"></a>00418   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;TD&gt; Montant "</span>;
<a name="l00419"></a>00419   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= ' &lt;SELECT NAME=<span class="stringliteral">"mont_sel"</span>&gt;'.$opt.' &lt;/SELECT&gt;&lt;/TD&gt;&lt;TD&gt;';
<a name="l00420"></a>00420   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= ' &lt;INPUT TYPE=<span class="stringliteral">"TEXT"</span> NAME=<span class="stringliteral">"s_montant"</span> SIZE=<span class="stringliteral">"10"</span> VALUE=<span class="stringliteral">"'.$p_s_montant.'"</span>&gt;&lt;/TD&gt;';
<a name="l00421"></a>00421   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;&lt;TR&gt;"</span>;
<a name="l00422"></a>00422   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<span class="stringliteral">"&lt;TD&gt; Internal code&lt;/td&gt;"</span>;
<a name="l00423"></a>00423   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.='&lt;TD&gt;&lt;input type=<span class="stringliteral">"text"</span> <a class="code" href="action_8inc_8php.html#a18">name</a>=<span class="stringliteral">"s_internal"</span> value=<span class="stringliteral">"'.$p_s_internal.'"</span>&gt;&lt;/td&gt;';
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<span class="stringliteral">"&lt;/TD&gt;&lt;/TR&gt;&lt;/TABLE&gt;&lt;/td&gt;&lt;TD&gt;&lt;table&gt;"</span>;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00428"></a>00428   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;TR&gt;"</span>;
<a name="l00429"></a>00429   $W=<span class="keyword">new</span> <a class="code" href="classwidget.html">widget</a>(<span class="stringliteral">"js_search_poste"</span>);
<a name="l00430"></a>00430   $W-&gt;label=<span class="stringliteral">"Numéro de poste"</span>;
<a name="l00431"></a>00431   $W-&gt;name=<span class="stringliteral">"poste"</span>;
<a name="l00432"></a>00432   $W-&gt;value=$p_poste;
<a name="l00433"></a>00433   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<span class="stringliteral">"&lt;TR&gt;"</span>.$W-&gt;IOValue();
<a name="l00434"></a>00434   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00435"></a>00435   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;TR&gt;"</span>;
<a name="l00436"></a>00436  
<a name="l00437"></a>00437  $A=<span class="keyword">new</span> <a class="code" href="classwidget.html">widget</a>('js_search_only');
<a name="l00438"></a>00438  $A-&gt;name='qcode';
<a name="l00439"></a>00439  $A-&gt;value=$p_qcode;
<a name="l00440"></a>00440  $A-&gt;extra=<span class="stringliteral">""</span>;
<a name="l00441"></a>00441  $A-&gt;table=1;
<a name="l00442"></a>00442  <span class="comment">// $r.=$sp-&gt;IOValue("p_qcode_label")."&lt;/TD&gt;&lt;/TR&gt;";</span>
<a name="l00443"></a>00443 
<a name="l00444"></a>00444  <span class="comment">//  $A=new widget("TEXT");</span>
<a name="l00445"></a>00445   $A-&gt;label=<span class="stringliteral">"Quick Code"</span>;
<a name="l00446"></a>00446   $A-&gt;extra='all';
<a name="l00447"></a>00447   <span class="comment">//$A-&gt;name="qcode";</span>
<a name="l00448"></a>00448   <span class="comment">//  $A-&gt;value=$p_qcode;</span>
<a name="l00449"></a>00449   <a class="code" href="bank_8inc_8php.html#a19">$sp</a>= <span class="keyword">new</span> <a class="code" href="classwidget.html">widget</a>(<span class="stringliteral">"span"</span>);
<a name="l00450"></a>00450   <a class="code" href="bank_8inc_8php.html#a19">$sp</a>-&gt;table=0;
<a name="l00451"></a>00451   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=$A-&gt;IOValue().'&lt;/TD&gt;'.$sp-&gt;IOValue(<span class="stringliteral">"qcode_label"</span>);
<a name="l00452"></a>00452   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00453"></a>00453   <a class="code" href="debug_8php.html#a0">echo_debug</a>('user_menu.php',__LINE__,<span class="stringliteral">"&lt;TD&gt;"</span>.$A-&gt;IOValue().'&lt;/TD&gt;&lt;TD&gt;'.$sp-&gt;IOValue(<span class="stringliteral">"p_qcode_label"</span>).<span class="stringliteral">"&lt;/TD&gt;"</span>);
<a name="l00454"></a>00454 
<a name="l00455"></a>00455   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD colspan=<span class="stringliteral">"3"</span>&gt; Le commentaire contient &lt;/TD&gt;';
<a name="l00456"></a>00456   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;&lt;TR&gt;"</span>;
<a name="l00457"></a>00457   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD COLSPAN=<span class="stringliteral">"3"</span>&gt; &lt;INPUT TYPE=<span class="stringliteral">"TEXT"</span> NAME=<span class="stringliteral">"s_comment"</span> VALUE=<span class="stringliteral">"'.$p_s_comment.'"</span>&gt;&lt;/TD&gt;';
<a name="l00458"></a>00458   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;&lt;TR&gt;"</span>;
<a name="l00459"></a>00459   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= '&lt;TD COLSPAN=<span class="stringliteral">"3"</span>&gt;&lt;INPUT TYPE=<span class="stringliteral">"SUBMIT"</span> VALUE=<span class="stringliteral">"Recherche"</span> NAME=<span class="stringliteral">"viewsearch"</span>&gt;&lt;/TD&gt;';
<a name="l00460"></a>00460   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TR&gt;"</span>;
<a name="l00461"></a>00461   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/TABLE&gt;"</span>;
<a name="l00462"></a>00462   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.=<span class="stringliteral">"&lt;/TR&gt;&lt;/TABLE&gt;"</span>;
<a name="l00463"></a>00463   <a class="code" href="bank_8inc_8php.html#a29">$r</a>.= <span class="stringliteral">"&lt;/FORM&gt;"</span>;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465 
<a name="l00466"></a>00466   <span class="keywordflow">return</span> <a class="code" href="bank_8inc_8php.html#a29">$r</a>;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468 }
</pre></div>
<p>
    </td>
  </tr>
</table>
</BODY>
</HTML>
