<!doctype linuxdoc system>
<article>
<title> PhpCompta Manuel d'utilisation</title>
<author>
 <name>originally written by Dany De Bontridder
 </name>
</author>
<date>$Revision$</date>
<abstract>
Ce document est le manuel d'utilisation de PhpCompta.<url url="http://savannah.nongnu.org/projects/phpcompta/" name="Ph pCompta Savannah">.
 Il aborde des thèmes
comme la sécurité, l'utilisation de PhpCompta, les trucs et astuces, et
de la documentation pour ceux qui aimeraient contribuer.
Il  ne reprend pas ce qui a déjà été dit dans l'INSTALL-fr et la FAQ-fr.
<!-- Table of contents -->
<toc>
<sect>Vue Général
<sect1>Définition des termes
<p>
<itemize>
<item> Gestion : art de gérer une entreprise ou une activité d'indépendant
<item> Comptabilité : tenue de journaux qui sont l'historique des opérations faites
par une entreprise ou un indépendant
<item> Catégorie de fiches : Ensemble de fiche qui ont un point en commun
exemple : Fourniture bureau est un ensemble des fiches bic, papiers, téléphone, électricité...
<item> Fiche : chaque fiche, correspond à un élément: un fournisseur, un client, un article
<item> Journaux Comptables : Il existe 3 journaux minimum et  indispensables à la tenue de la
comptabilité, il s'agit du journal des ventes qui contient toutes les ventes effectuées, journal
d'achat qui contient tous les achats effectués, journal financier qui contient toutes les opérations
financières (banques, caisses)
<item> Postes Comptables : afin de simplifier, chaque type d'opération à un poste comptable, c'est
un chiffre dans un tableaux, exemple en Belgique 5500 représente les comptes bancaires, 600 les
achats de fournitures... Ces postes comptables ne sont pas les mêmes dans tous les pays. Ils sont
regroupés dans un plan comptable. En général, le plan comptable se subdivise en 6 grandes familles 
<itemize>
<item>1.  Les comptes de capital  (immobilisé)
<item>2.  Les immobilisations corporelle (Actif a plus d'un an)
<item>3.  Les Stocks et commandes
<item>4.  Les comptes de tiers (clients, fournisseurs,tva)
<item>5.  Les comptes d'actifs (compte en banque,caisse...)
<item>6.  Les charges d'exploitations
<item>7.  Les produits d'exploitations.
</itemize>
<item> Débit et crédit
Les postes comptables sont en parties doubles, l'une est le débit l'autre est le crédit.
Les actifs diminuent quand le crédit augmentent, les comptes de passifs diminuent quand
le débit augmentent. Par exemple, si un compte en banque est débité il augmente, mais dans
la vie courante, votre compte en banque est une dette que votre banque a envers vous, donc
quand sa dette augmente on dit que le compte est crédité mais dans votre comptabilité, cela
correspond à l'inverse: de votre point de vue, votre compte en banque est une créance sur 
votre banque donc s'il augmente, il est débité !!!
</itemize>
</p>
</sect1>
<sect1>Logiciel de comptabilité ou de gestion ?
<sect2>Définition
<p>
La comptabilité consiste, de la manière prévue par les lois sur la comptabilité,
 à enregistrer toutes les opérations  d'une activité commerciale, industrielle ou artisanale.

La grande différence avec la gestion, est que la comptabilité est tenue
en suivant des lois précises, qui malheureusement changent suivant le  pays.

De plus, elle doit entre autre permettre les déclarations
fiscales, permettre des analyses bilantaires et surtout être conforme à  la législation.

Ce n'est pas le cas, de la gestion, la gestion consiste à gérer une entreprise ou une activité
d'indépendant, ce qui inclut aussi la gestion du courrier, du personnel...

En bref, la comptabilité est guidé par la législation tandis que la
gestion par la gestion. Un programme de comptabilité peut rendre les
services d'un programme de gestion et parfois les programmes de
gestion peut rendre les services d'un programme de comptabilité. La
limite est floue et discutable.
</sect2>
</sect1>
<sect> Mémento de comptabilité
<sect1> Introduction
<p> Ce mémento sera vraiment très bref; si vous voulez en savoir
plus, vous serez obligé d'aller chercher les livres adéquats. Je vous conseille vivement pour la Belgique "le Précis de comptabilisation de Joseph Antoie et Jean Paul Cornil. Ed. De Boeck Université".

<p>
Cependant, sur le site de PhpCompta vous trouverez des liens qui
devraient vous aider à commencer cette matière.

</sect1>
<sect1> Le Bilan
<p> L'un des objectif de la comptabilité est de pouvoir établir un bilan qui
donnera une idée de la santé de la société.

Le bilan est en deux parties, la partie droite représente les comptes
d'actifs tandis que la partie gauche représente le passif. Il faut que
les deux colonnes aient le même total. Ce qui est normal puisque toute
opération se passe entre par opération de débit - crédit.
</sect1>

<sect1> Les comptes actifs / passifs <label id="comptesap">
<p>
Il existe une première catégorie de compte (classe 1 à 5) qui est
divisé en deux sortes de comptes : les comptes d'actif et les comptes
de passif.

<p>
Si un compte est débité alors forcément au moins un autre compte sera
crédité

<p>
Exemple
Un client paie sa facture sur votre compte en banque on aura alors
<verb>
Banque     (débit)
            à
               Client (crédit)
</verb>
</p>
<p>
Pour bien comprendre les comptes on les schématise par le T
<verb>
                      compte
---------------------------+--------------------------------
                           |
 débit                     | crédit
                           |
</verb>
</p>
<p>
La dette du client diminue mais votre compte en banque augmente. Et
toutes les opérations comptables sont ainsi. La convention veut que
l'on commence toujours par le compte débité puis le compte crédité. Il
faut toujours garder un mémoire
<itemize>
<item> L'actif augmente au débit et diminue au crédit
<item> Le passif augmente au crédit et diminue au débit
</itemize>

<p>
Les comptes d'actifs sont les comptes comme les comptes en banque, les
créances, le matériel que vous possédez. Ce sont les ressources.

<p>
Les comptes de passif sont les dettes, les emprunts. Ce sont les
Emplois.

</sect1>

<sect1> Les comptes de résultats
<p> Il y a deux sortes de compte de résultat, les classes 6 et
7.

<sect2> Les charges
<p> Les charges (classe 6) représentent toutes les dépenses de votre
entreprise: loyer, paiement au personnel, charge d'intérêt...

Les charges augmentent au crédit mais certains comptes peuvent aussi
être diminués.

Par exemple, vous encodez une facture d'électricité, vous auriez
<verb>
Charge   électricité
            à
               Fournisseur
</verb>
Remarquez qu'ici on encode la facture, la reconnaissance de
notre dette envers le fournisseur d'électricité et pas du tout le
paiement! Ce paiement se fera en banque par l'écriture Fournisseur à
banque: la créance de votre fournisseur diminue notre compte en banque
diminue. voir les explications de la section  <ref id="comptesap"
 name="comptes actifs passifs">

</sect2>
<sect2> Les produits
<p> C'est très simple, les produits sont tout simplement ce que vous
vendez, gagnez comme intérêts financiers, bref, les produits c'est les
créances que vous avez.

Le paiement de vos créances, devrait se faire avec les comptes de
banques et de débiteurs.  Cependant, il arrive souvent que l'on ne
passe pas par des comptes débiteurs mais directement en faisant banque
à produits...

</sect2>
<sect2> Les pièces justificatives.
<p>Toutes les pièces justificatives (extrait de compte en banque, factures,
...) doivent être numérotées.

<p> Le numéro de la pj doit être soit celui de l'opération dans le grand livre,
 soit celui du livre centralisé où l'opération a été inscrite. Il est important 
que ce numéro vienne du livre centralisé puisque lors de la centralisation, les
opérations sont réordonnées par date.
</sect2>
</sect1>
<sect1> Fiscalité, TVA
<p> Toutes les requalifications des montants doivent
se faire par le journal des opérations diverses

<sect2> Belgique
<p>
Utilisez toujours les comptes 67xxx pour toutes  les opérations
fiscale non déductible de votre bénéfice par exemple :versement anticipé d'impôt,
paiement de l'impôt, dépense non admise: partie non déductible de
certains frais ( voiture, restaurant...).

<sect3> TVA & impôt
<p> Pour faire votre déclaration tva, vous pouvez utilisez les
balances des comptes ou les rapports.

<p>
Attention  NE PAS REPRENDRE LES
MONTANTS AINSI !!!. Avant de faire votre déclaration, vous devez d'abord
rectifier les montants. Par exemple, 50% de la tva sur la voiture ne
sont pas récupérable par la tva mais par l'impôt des société.
Il faut "déplacer" 50% de cette tva  dans un poste comptable tva non
admises,
cela devrait être un compte de la classe 6 (donc 6xxxx à 411xxx), les charges
augmentent mais la tva à récupérer diminue, ce qui est logique puisque
cette tva est à récupérer par l'impôt des sociétés.

<p> Idem pour les frais de restaurant, ne pas oublier pendant les
travaux de fin d'exercice,d'imputer 50% du total de vos frais de
restaurant à un compte de dépense non admise. Il n'est pas dans le
PCMN donc créer le poste vous-même (classe 67).

<p>Les écritures comptables : chaque trimestre vous devez payer un acompte de 
tva qui est égal au tiers du montant dû à la dernière déclaration
<verb>
4117     Acompte TVA
    5500 Banque
</verb>
A la fin du trimestre, il faut regrouper tous les comptes TVA.
Si vous devez payer la TVA
<verb>
451x    TVA à payer
à
   411x TVA à récupérer
   4117 Acompte sur TVA
   4519 Compte TVA
</verb>
Si vous devez récupérer de la TVA
<verb>
451x    TVA à payer
4119 Compte TVA
à
   411x TVA à récupérer
   4117 Acompte sur TVA

</verb>
Quand vous recevrez la déclaration constatant votre créance
<verb>
4118   TVA à rembourser par l'administration
à
     4119  Compte TVA
</verb>
Ensuite, utilisez le compte 4519 ou 4118 avec un compte en banque quand vous
recevrez ou paierez la TVA

</sect3>

<sect2> France
<p> Pas reçu de doc ni d'aide sur ce sujet désolé
</sect2>
</sect1>
<sect1>Ecriture de fin d'exercice comptable (Belgique)
<p> Chaque année est composée de 13 périodes, les 12 premières font exactement
un mois mais la 13ième est toujours sur un seul jour : le 31 décembre. C'est cette période qui sera la période de clôture de l'année comptable.

<p>Pour commencer, changer vos préférences pour avoir cette période par défaut. Normalement vous ne devrez utiliser que le journal des Opérations diverses et
aucun autre.

<p>Ensuite, imprimez une balance des comptes de l'année écoulée. 
Cela fait, le reste est assez facile.

<sect2> Les amortissements
<p> Dans la comptabilité Belge, vous trouverez ce qu'il y a à amortir dans le poste 24xxx, imprimez ces fiches et calculez l'amortissement pour l'année, ensuite en opération diverse, vous l'imputerez ainsi
<verb>
63xxx Dotation aux amortissement
à
      2409xxxx Amortissement
</verb>

Evidemment les postes comptables peuvent un peu changer suivant la façon dont
vous avez adapté votre plan comptable. Faites toutes même attention à ne pas 
mélanger ce que vous avez acheté il y a deux ans et l'année passée. 
Normalement, chaque élément faisant l'objet d'un amortissement 
doit avoir un plan d'amortissement, c'est-à-dire un document qui décrit 
ce qui est amorti, indique la valeur d'acquisition et quelle somme 
sera amortie sur quelle années. 
Le document est de format libre, le mieux est d'utiliser 
une feuille du tableur d'OpenOffice.org pour résumer tout ce qui doit être amorti. 
Ce document est appelé tableau d'amortissement. Attention les montants sont hors tva !!!!
<verb>
exemple :
bureau valeur d'acquisition 500euros acheté en 2003
 Amorti en 2003 100 euros
 Amorti en 2004 100 euros
 Amorti en 2005 100 euros
 Amorti en 2006 100 euros
 Amorti en 2007 100 euros
PC valeur d'acquisition 1200euros acheté en 2002
 Amorti en 2002 = 400 euros
 Amorti en 2003 = 400 euros
 Amorti en 2004 = 400 euros

Total à amortir en 2003 = 100 (pour le bureau) + 400 (pour le PC)
</verb>
</sect2>
<sect2> Les dépenses non admises
<p> Dans la fiscalité belge, il s'agit entre autre de 50% des restaurants, 25% des frais de voiture (taxes de roulage, car wash...), des versements anticipés d'impôt et des paiements des impôts d'années antérieures.

Vous devez donc utilisez le compte 67xxx pour diminuer les charges de leur partie non déductible
</sect2>
<sect2>Reclassement des Charges, Produits et Dettes
<p> Il faut tout d'abord retrouver toutes les fournisseurs non payés au 31 décembre et vérifier qu'ils n'ont pas été payés dans  le courant de janvier ou de février. Si c'est le cas on aura un reclassement de dettes, sinon on devra penser que la dette a été payé par le gérant ou que la dette est toujours due. Cela doit se règler au cas par cas.

Il faut aborder la régularisation des comptes de charges et des produits (comptes 490, 491, 492, ,493) , les dettes supérieures à un an échéant dans l'année... (doit être complèté).
</sect2>

<sect2>Les variations de stocks
<p>En fin d'année, il faut faire l'inventaire du stocks. Soit on a plus de marchandise que ce qu'il est inscrit dans notre comptabilité, on aura alors une réduction de charge (340 à 6094) soit on aura moins de marchandise que prévu, dans ce cas il y aura une augmentation des charges (6094 à 340). (INCOMPLET)

</sect2>
<sect2>Compte de l'exploitant
<p>Certaines dépenses ont été payées par le gérant ou l'administrateur en liquide. Donc ces paiements ne figureront pas dans les extraits de compte de la banque. La seule façon de faire est d'utiliser les comptes 4890 dans le cas d'une dette envers le gérant ou 4160 dans le cas d'une créance sur le gérant. Il faut donc solder ces comptes et constater la dette ou la créance.


</sect2>
<sect2> Affectation du résultat
<p>La dernière étape avant le bilan: affecter le résultat de l'exercice, que ce soit un bénéfice ou une perte

</sect2>
</sect1>
<sect1>Salaire et Compte de gérant
<p>Le gérant utilisera les comptes 4890 et 4160 pour gérer l'argent qu'il prélève ou qu'il avance à sa société. Ces comptes peuvent aussi être utilisé lors du paiement des salaires. Il est important de rappeler qu'en Belgique, il est nécessaire de payer le précompte professionnel.

</sect1>
</sect>
<sect> Les modes
<p>
Dans le menu préférence, il existe deux sortes d'interface que vous pouvez utiliser,
</p>
<sect1>Le mode comptable
<p>
Dans ce cas, vous verrez votre comptabilité comme un comptable s'attend à la voir
avec des postes comptables, des écritures comptables impliquant des
débits et des crédits.

Vous aurez accès à votre comptabilité de façon "brute" avec beaucoup
moins de contrôle donc plus de risques de "mal encodé"; l'une des
règles comptables est l'irréversibilité des écritures, si vous avez
mal encodé, vous devez introduire l'écriture comptable inverse pour
corriger, pensez à mettre la mention "correction d'erreur"
</sect1>
<sect1>Le mode utilisateur
<p>
Dans ce cas, vous verrez votre comptabilité comme un utilisateur, facture à payer, facture à encoder...

C'est le profil par défaut des utilisateurs que vous créerez, sans
formation comptable particulière  , l'autre
profil ne pourrait que vous perturbez, il s'agit pourtant de la même chose mais vue différemment.

Certaines opérations ne sont cependant possible que dans le profil comptable, il s'agit d'opérations
peu fréquentes et qui demande une réelle connaissance de ce domaines pour être encodés correctement
par exemple une augmentation de capital, une reprise d'amortissement,
écriture d'ouverture d'exercice...

Les valeurs des articles (vente ou achat) sont dans les fiches mais
peuvent être changé lors de la création d'une opération de vente ou
d'achat. Les taux de tva aussi sont dans les fiches. Dans la version
1.0.0, il ne sera pas possible de la changer lors de la création de
l'opération.

A chaque taux de tva correspond un poste comptable. Pour faire une
déclaration, il suffit d'avoir la somme de ce poste pour la période.


</sect1>
</sect>
<sect>Les journaux
<p> Il existe 4 sortes de journaux
<itemize>
<item> Vente regroupant les ventes
<item> Achat Celui regroupant les achats
<item> Financier Celui regroupant tous les mouvements financiers (banque, caisse...)
<item> Opérations divers Et celui regroupant toutes les autres opérations (augmentation de bilan, amortissement
</itemize>

La première chose à faire quand on crée un journal est de le paramétrer correctement
L'écran est divisé en deux parties, celle du dessus, s'adresse au profil "comptable" celui
du dessous au profil utilisateur.<label id="journal_comptable">

Pour le profil comptable, vous devez mettre un filter pour les comptes
visibles au débit ou au crédit

exemple :
<verb>
 Postes utilisables journal (débit)        60*
 Postes utilisables journal (crébit)       411* 4000001
</verb>

Ceux qui terminent par une étoile reprennent les comptes qui commence
par l'expression ainsi 411* reprendra 411, 4111, 4112,4113 et
4114. Vous séparez les différents comptes par un espace.

En mode utilisateur, il faut cocher les fiches que l'on souhaite utiliser
dans ce journal mais avec une exception : les journaux d'opérations diverses
n'utilisent jamais les fiches voir <ref id="journal_od" name="Journaux des Opérations diverses">.

Il vaut mieux ne pas créer plus de 4 journaux par types, c'est-à-dire
16 au total, il y a à cela deux raisons : la première est que cela
devient ingérable, la seconde est que l'affichage en mode utilisateur
serait euh... atroce. Quatre journaux en tout est largement suffisant
pour les besoins d'une entreprise.
<sect1> Journal des Achats
<p>Reprend uniquement les opérations d'achat que ce soit pour l'achat
de marchandises, de services ou de matériel.

</sect1>

<sect1> Journal des Ventes
<p>Le journal des ventes regroupe les opérations de vente, donc ce que
vous vendez. En mode utilisateur, c'est très simple: vous devez juste
ajouter le client, la date et évidemment les articles.

<p>Les rabais et remises ne sont pas prévues dans la version 1.0.0

<p>La ligne du bas vous permet de faire des petits calculs rapide
(exemple: 1+2*3.2)...  Il suffit d'utiliser la touche de tabulation ou
de cliquer ailleur pour voir le résultat.

</sect1>
<sect1> Journal Financiers
<p> Uniquement pour gérer les comptes en banque, visa, bref tout ce
qui est financier (pas les prêts qui devraient être en opération
diverses mais bien le paiement de ces prêts).

<p> La date est important, il est important de vous rappelez: on vous
donne l'ancien solde et le nouveau, vérifiez sur vos extraits que
cela correspond bien.

<p> Le commentaire est optionnelle, c'est ce que vous verrez
apparaître lorsque vous regarderez votre journal.

<p>Introduisez un montants négatif si vous payez (le compte diminue)
et un montant positif si vous recevez de l'argent.

</sect1>
<sect1> Journal des Opérations diverses <label id="journal_od">
<p> Reprend toutes les opérations qui ne sont pas comprises dans les autres
journaux. Ce qui implique les amortissements, les salaires, les produits financiers,
les dépenses non admises, le paiement de l'impôt, de la tva...

C'est l'unique journal qui n'utilise pas les fiches. Pourquoi ? Tout
simplement parce 
que s'il utilisait lui-aussi les fiches, il faudrait faire une fiche
par poste comptable, 
ce qui serait rapidement ingérable. De plus, es fiches sont là pour
les opérations 
courantes (vente/Achat/banque). Puisque ce journal n'utilise pas les
fiches, le filtre est 
le même que celui défini pour le mode comptable voir <ref
id="journal_comptable"  name="définition journal">


</sect1>

</sect>
<sect> Les fiches
<sect1>Création d'une catégorie de fiche
<p>
Les catégories de fiches sont en fait le rassemblement de fiche
ensembles, par exemple, les marchandises, les clients, les
fournisseurs... 

Pour créer une catégorie, cliquer sur Fiche et à droite sur
création. Vous devez donner le nom de la catégorie et le type de fiche
que vous voulez.  

La classe de base est le poste comptable parent de vos fiche, ce poste doit exister, il faut alors
cliquer aussi sur "create account for each" qui permet de générer
automatiquement le poste comptable voulu, ce poste sera
automatiquement ajouté dans le Plan Comptable. Si cette option n'est
pas cochée, vous devrez ajouter manuellement le poste comptable et le
donner explicitement. Si vous ne souhaitez pas que chaque fiche aie
son propre poste comptable, ne cochez pas l'option et n'ajoutez pas manuellement
le poste comptable. Dans ce cas, ce sera le poste du modèle de fiche
par défaut qui sera utilisé, si vous ne l'indiquez pas ce sera la
classe par défaut de ce type de modèle. 

Pour simplifier :
<itemize>
<item>Vous voulez que chaque fiche aie son propre poste comptable et vous souhaitez que ce poste soit crée automatiquement : cochez la case 'Create account for each'
<item>Vous souhaitez qu'il n'y a pas de poste comptable attaché à chaque fiche: ne la cochez pas

<item>Vous souhaitez qu'il y aie un poste comptable attaché à chaque fiche 
mais pas généré automatiquement: ne cochez pas. Par la suite,  ajoutez
 l'attribut 'Poste Comptable' si nécessaire, la plupart des fiches ont
par défaut un attribut 'Poste Comptable,
vous devrez mettre manuellement le poste comptable
 que vous souhaitez pour chaque fiche. Dans ce cas, toutes les
 fiches devront avoir un poste comptable. Sinon ce sera le poste comptable
 par défaut qui sera utilisé.
</itemize>


</sect1>
<sect1>Création d'une fiche 
<p>
Quelques attributs à expliquer : Gestion Poste, Prix Achat, Prix de
vente, Poste Comptable. Vous n'êtes pas obligé de créer une fiche pour
tout, par exemple pour les restaurants, vous pouvez encodez une seule
et unique fiche appelée restaurant.

<p>Autre : comme plusieur fiches peuvent utiliser le même poste comptable, si on
modifie le nom d'une fiche cela ne modifiera pas son nom dans le Plan Comptable

</sect1>
<sect>Encodage d'opération
<sect1> Remarques générales
<p> La tva est automatiquement mise, on prend celle de la fiche, il n'est
donc normale que vous ne deviez pas l'encoder. Les prix sont aussi pris dans
les attributs de la fiche mais vous pouvez modifier manuellement.

<p> En cas de montant négatif, les écritures sont inversées 
Exemple 
<verb>
* Paiement d'une facture (montant négatif) on aura 
fournisseur
    à 
           client
* Reprise de marchandise (diminution de vente & tva)
Tva à payer, vente 
    à 
     client
La dette du client diminue


</verb>
<p> Il n'est pas possible de modifier un encodage mais vous pouvez l'annuler.
Attention cependant de ne pas annuler l'annulation !!! Quand vous
cliquez sur Confirmer soyez sûr de ce que vous faites.

</sect1>
<sect1>Achat
<p> En mode utilisateur, c'est supposé être intuitif.

<p> Si vous ramenez du matériel, vous pouvez soit annuler l'opération
d'achat, soit utiliser les quantités négatives.

</sect1>
<sect1>Vente
<p> Pour ajouter une vente, cliquez sur nouvelle, puis utilisez les
boutons pour ajouter les clients, services et marchandises que l'on
vend. 

<p> En cas de reprise de matériel, vous pouvez mettre des quantités
négatives - attention : des quantités, pas des prix unitaires-. Le
stock sera automatiquement réadapté pour tenir compte de ce retour de
matériel. 

<p> Pensez à utilisez le dossier "demo" pour faire tout vos tests et
découvrir PhpCompta.
</sect1>
<sect1>Opération financière
<p> En cas de paiement, il faut introduire le montant négatif.


</sect1>
<sect1> Opérations Diverses
<p> Les cartes de crédit :
La visa = changement de créancier : visa paie le fournisseur vous
payez Visa

<p> Facture payée par mensualité
Opération de rapprochement ???

</sect1>
</sect>
<sect>Les Rapports
<sect1>Introduction
<p> Les rapports permettent de rapidement encoder des rapports.
Par exemple, le total des ventes, le total encore à payer, la différence
entre les entrées et les charges... Il n'y a pas vraiment de limite. 

<p> Les rapports permettent d'utilisent des formules (mod,round,*,-) 
sur des soldes de comptes.

</sect1>
<sect1>Syntaxe
<p>Quelques règles:
<itemize>
<item>les postes sont toujours écrits entre crochets;
<item>pour avoir la somme du poste et des sous-poste, 
il faut utiliser le %;
<item>Les soldes sont toujours positifs et vous ne savez pas 
s'ils sont au débit ou au crédit.
<item>Si vous souhaitez commencer à une autre période pour certains
compte et donc avoir plusieurs intervalles pour un rapport, vous
devez utiliser l'option FROM=MM.YYYY (voir exemple). Ce genre d'option est 
très utile pour par exemple les déclarations de TVA.
</itemize>

<p>
Exemples de formule:
<verb>
Résultat d'exploitation brute round([7%]-[6%])
Impot estimé (sans compter les amortissements) ([7%]-[6%])/0.24
Total des comptes en banque [550%]
Total TVA récolté depuis janvier 2005 : [4511]  FROM=01.2005
Perte ou profit 	if ([7%]-[6%]>0)?"Benefice":"Perte"
</verb>

</sect1>
<sect>Sécurité
<sect1> Remarques
<p>
PhpCompta a sa propre sécurité, cependant si vous voulez vraiment
sécuriser votre comptabilité, vous devez prendre en compte qu'il ne
suffit de sécuriser votre server et phpcompta mais aussi les
programmes sur lequel le programme s'appuie. C'est-à-dire Apache,
utilisation de https à la place de http, de PostGresql, de l'utilisation
des odbc, de l'encryption des backups, de la traque des mots de passe
trop facile à deviner,... La liste est longue et c'est l'ensemble des
mesures qui déterminera la sécurité de vos données, il suffit d'une
seule faiblesse pour que la sécurité soit insuffisante. Le sujet
est très vaste, il englobe trop de choses. C'est pourquoi nous ne
traiterons que de PhpCompta uniquement et un tout petit peu de PostgreSql.
</sect1>
<sect1> Base de données
<p> 
En tout premier lieu, si vous avez réussi à tout installer, vous
devez ajouter une sécurité à l'accès de vos database. Donc n'essayez
pas d'utiliser install.sh quand la sécurité par mot de passe est
activée !!! Ou alors mettez le mot de passe dans ~/.pgpass de
l'utilisateur phpcompta

Dans include/constant.php changer le mot de passe (ligne
phpcompta_password), il contient dany par défaut.


En tant
qu'utilisateur postgres, ajoutez un mot de passe à votre utilisateur
phpcompta avec la commande //
psql -c "alter user phpcompta password 'votre_mot_de_passe'" 
Ce mot de passe est évidemment celui dont on a parlé au paragraphe
précédent.


Ensuite changez le pg_hba.conf, et mettez les lignes suivantes
<verb>
host   all         all        172.16.31.0  255.255.255.0           md5
local   all         all                                             md5
host    all         all         127.0.0.1         255.255.255.255   md5
</verb>
La première ligne correspond à mon réseau privé.

Relancez postgres, voilà maintenant un mot de passe sera toujours
requis, n'oubliez pas de mettre un mot de passe à vos
superutilisateurs PostgreSql avant de changer, sinon vous ne pourrez
plus vous connecter.

Ensuite, changer les droits sur le répertoire où sont vos fichiers
avec chmod 700, attention : le propriétaire des fichiers doit être le
même que du propriétaire du process httpd, pour vérifier faite ps -ef|grep
httpd, le propriétaire du processus ttpd se trouve dans la première
colonne.
Exemple chez moi, le propriétaire est apache
<verb>
root@july data]# ps -ef|grep httpd
root     24540     1  0 22:47 ?        00:00:00 /opt/http2//bin/httpd -k start
apache   24541 24540  0 22:47 ?        00:00:00 [httpd]
apache   24542 24540  0 22:47 ?        00:00:00 [httpd]
apache   24543 24540  0 22:47 ?        00:00:00 [httpd]
apache   24544 24540  0 22:47 ?        00:00:00 [httpd]
apache   24545 24540  0 22:47 ?        00:00:00 [httpd]
root     24555 23968  0 22:56 pts/0    00:00:00 grep httpd

</verb>
</sect1>


<sect1> PhpCompta
<p>
Dans PhpCompta, le module de sécurité permet d'établir quel
utilisateur peut accéder à quel dossier, ce qu'il peut y faire,
les journaux qu'il peut accéder... Chaque fois qu'une page est chargée,
le mot de passe et le login utilisateur sont vérifiés pour savoir si
primo il a accès a ce qu'il demandé à faire et secundo  si son compte
est actif et que le mot de passe fourni est valide. Ces valeurs sont
stockés sur le server. Peu de système vérifie aussi souvent les
permissions d'un utilisateur. Evidemment utiliser le cache de
l'explorateur pour découvrir ces informations est une perte de
temps,  utiliser son historique pour accéder à vos données ne
fonctionnera pas non plus.

<p>Pour ajouter un utilisateur, vous devez tout d'abord avoir les droits
admin et créez l'utilisateur. A ce moment-là, il n'a accès à rien du
tout. Il faut ensuite se connecter à un dossier sur lequel vous avez
des droits admin et l'ajouter, par défaut il ne peut rien faire. A
vous de spécifier ce qu'il peut accéder et son droits par défaut
(écriture ou lecture). De cette façon, un utilisateur (sauf avec des
droits admin ) ne peut pas accéder à des nouveaux dossiers. Chaque
accès doit être donné explicitement.

<p>Dans un dossier, un utilisateur a toujours un droit par défaut. Si par
exemple, son droit par défaut est de lire il pourra lire tout 
ce qu'il veut et écrire uniquement dans ce qui a été explicitement
permis. Si son droit par défaut est d'écrire, c'est l'inverse, il
pourra écrire partout sauf là ou est explicitement il ne peut
qu'écrire. Le sens d'écrire dans ce contexte-ci doit se comprendre
comme la capacité à  pouvoir ajouter ou modifier des informations.

</sect1>
</sect>
<sect> Gestion de stock
<p> Pour toutes les marchandises dont vous voulez gérer le stock, il
faut ajouter l'attribut gestion de stock, vous devez y mettre un code,
et exactement le même code dans sa contrepartie. Les mêmes
marchandises ont toujours deux fiches : l'une pour la vente et l'autre
pour l'achat, la seule façon de lier ces fiches est de leur donner le
même code de stock. 

<p>Bien faire attention à ce code, il doit être le même pour les fiches
achats et ventes de la même marchandise, si vous utilisez ce code
stock pour deux différentes marchandise, vous ne serez plus en mesure
de faire la différence entre ces 2 marchandises dans le stock.

<p>Dans le mode utilisateur, les achats et les ventes vont
automatiquement mettre le  stock à jour. Dans le mode comptable ce
n'est pas le cas ! 

<sect1> Gestion de stock
<p> Dans le menu avancé vous verrez l'item stock, dans le mode
comptable, il n'est pas possible de gérer le stock. Il faut rechanger
son mode par défaut à User.

</sect1>
</sect>
<sect> Rapprochement
<p>En mode utilisateur, vous pouvez lier des opérations entre elles,
en général ce seront des paiements qui correspondent à des
factures. Ce n'est pas obligatoire, c'est là uniquement pour vous
permettre de mieux voir ce qui concerne quoi.

<p>Les rapprochement ne se font pas forcément dans le même journal,
par exemple un paiement sera dans le journal financier mais sera lié à
une opération de vente (journal de vente) ou d'achat (journal
d'achat).

<p> Le point important est que dans la petite fenêtre montrant les
détails, vous pouvez spécifier si la facture est ou non payée, cela
vous permettra de savoir en temps réelle, ce qui est déjà payé et ce
qui ne l'est pas, cette possibilité n'existe que pour les journaux de
type vente et achat.

</sect>
<sect> Centralisation
<sect1>Définition
<p> La centralisation est l'opération comptable qui consiste à
regrouper les différents journaux comptables dans le grand livre.
</sect1>
<sect1>Méthode
<p> Cette opération n'est pas réversible. 

<p> Tout d'abord, vous devez clôturer les périodes, une période
clôturée est une période où il ne sera pas possible d'ajouter ou de
modifier quoi que ce soit, d'ailleurs, il vaut mieux toujours mieux
clôturer une période avant de faire la déclaration TVA. Cela empêche
les erreurs.

<p> Ensuite, vous pourrez centraliser. Pour l'instant, la clôture des
périodes se fait par (mode utilisateur): "Paramètre -> période" et la
centralisation se fait par le menu "Avancé -> Centralise".

</sect1>
</sect>
<sect> Exemple
<sect1>Ouverture de compte
<p>
En débit d'année, il faut réouvrir les comptes si on ouvre un nouveau dossier
ou les ouvrir en commençant une activité.De toute façon, il faudrait régulariser certains
compte

1 janvier
Pierre lance une société dont le capital est de 18200 euros, dont
seulement 6100 euro sont libérés et mis sur un compte en banque

Opération diverse ->
débit banque 6100 euros
débit capital non appelé 12100
à crédit capital souscrit     18200
</sect1>
<sect1> Quelques factures
<p>5 janvier
Pierre paie le loyer (400 euro) à son propriétaire par banque, prendre
le journal achat

<p>7 janvier
Pierre paie l'eau et le gaz (250 euros + 21%tva), cliquez  sur le
bouton new pour créer les fiches manquantes

<p>15 janvier
Extrait de compte banquaire: on voit le paiement du loyer du 5 janvier

<p>17 janvier
Banque : on voit les paiements du 7 janvier
encoder dans le journal financier, ne pas oublier le rapprochement

<p>21 janvier
Vente : vend 15 pièces de l'article A, paiement par banque

<p>26 janvier
Banque : on voit les paiements du 15 janvier
encoder dans le journal financier, ne pas oublier le rapprochement

<p>31 janvier
Banque : le client nous a payé pour la facture du 21
encoder dans le journal financier, ne pas oublier le rapprochement

</sect1>
</sect>
<sect>Trucs et astuces
<sect1>Ouvrir plusieur fenêtres
<p>
Vous pouvez toujours ouvrir plusieurs fenêtres. C'est très utile, par
exemple dans le cas ou vous encodez une OD mais un poste comptable manque
vous pouvez l'ajouter dans une autre fenêtre puis reprendre la fenêtre
où vous travailliez, le poste comptable est maintenant disponible.

</sect1>
</sect>
</article>
