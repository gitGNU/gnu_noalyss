--
-- PostgreSQL database dump
--

\connect - toto

--
-- TOC entry 2 (OID 670715)
-- Name: schema_test; Type: SCHEMA; Schema: -; Owner: toto
--

CREATE SCHEMA schema_test;


--
-- TOC entry 3 (OID 670951)
-- Name: toto; Type: SCHEMA; Schema: -; Owner: toto
--

CREATE SCHEMA toto;


\connect - dany

SET search_path = public, pg_catalog;

--
-- TOC entry 16 (OID 44758)
-- Name: a; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE a (
    col integer
);


--
-- TOC entry 39 (OID 75842)
-- Name: plpgsql_call_handler (); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION plpgsql_call_handler () RETURNS language_handler
    AS '$libdir/plpgsql', 'plpgsql_call_handler'
    LANGUAGE c;


--
-- TOC entry 36 (OID 75843)
-- Name: plpgsql; Type: PROCEDURAL LANGUAGE; Schema: public; Owner: 
--

CREATE TRUSTED PROCEDURAL LANGUAGE plpgsql HANDLER plpgsql_call_handler;


--
-- TOC entry 40 (OID 75846)
-- Name: plperl_call_handler (); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION plperl_call_handler () RETURNS language_handler
    AS '$libdir/plperl', 'plperl_call_handler'
    LANGUAGE c;


--
-- TOC entry 37 (OID 75847)
-- Name: plperl; Type: PROCEDURAL LANGUAGE; Schema: public; Owner: 
--

CREATE TRUSTED PROCEDURAL LANGUAGE plperl HANDLER plperl_call_handler;


--
-- TOC entry 17 (OID 662151)
-- Name: dany; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE dany (
    a integer NOT NULL,
    b text
);


--
-- TOC entry 18 (OID 662163)
-- Name: dany_child; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE dany_child (
    a integer,
    c text
);


--
-- TOC entry 4 (OID 670650)
-- Name: users_id; Type: SEQUENCE; Schema: public; Owner: dany
--

CREATE SEQUENCE users_id
    START 1
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 1
    CACHE 1;


--
-- TOC entry 6 (OID 670652)
-- Name: seq_jnt_use_dos; Type: SEQUENCE; Schema: public; Owner: dany
--

CREATE SEQUENCE seq_jnt_use_dos
    START 1
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 1
    CACHE 1;


--
-- TOC entry 8 (OID 670654)
-- Name: seq_priv_user; Type: SEQUENCE; Schema: public; Owner: dany
--

CREATE SEQUENCE seq_priv_user
    START 1
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 1
    CACHE 1;


--
-- TOC entry 10 (OID 670656)
-- Name: s_modid; Type: SEQUENCE; Schema: public; Owner: dany
--

CREATE SEQUENCE s_modid
    START 1
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 1
    CACHE 1;


--
-- TOC entry 12 (OID 670658)
-- Name: dossier_id; Type: SEQUENCE; Schema: public; Owner: dany
--

CREATE SEQUENCE dossier_id
    START 3
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 3
    CACHE 1;


--
-- TOC entry 19 (OID 670660)
-- Name: ac_users; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE ac_users (
    use_id integer DEFAULT nextval('users_id'::text) NOT NULL,
    use_first_name text,
    use_name text,
    use_login text NOT NULL,
    use_active integer DEFAULT 0,
    use_pass text,
    use_admin integer DEFAULT 0,
    use_theme text DEFAULT 'Light',
    use_usertype text NOT NULL,
    CHECK (((use_active = 0) OR (use_active = 1)))
);


--
-- TOC entry 20 (OID 670670)
-- Name: ac_dossier; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE ac_dossier (
    dos_id integer DEFAULT nextval('dossier_id'::text) NOT NULL,
    dos_name text NOT NULL,
    dos_description text,
    dos_jnt_user integer DEFAULT 0
);


--
-- TOC entry 21 (OID 670677)
-- Name: jnt_use_dos; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE jnt_use_dos (
    jnt_id integer DEFAULT nextval('seq_jnt_use_dos'::text) NOT NULL,
    use_id integer NOT NULL,
    dos_id integer NOT NULL
);


--
-- TOC entry 22 (OID 670680)
-- Name: version; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE "version" (
    val integer
);


--
-- TOC entry 23 (OID 670682)
-- Name: priv_user; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE priv_user (
    priv_id integer DEFAULT nextval('seq_priv_user'::text) NOT NULL,
    priv_jnt integer NOT NULL,
    priv_priv text
);


--
-- TOC entry 24 (OID 670688)
-- Name: theme; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE theme (
    the_name text NOT NULL,
    the_filestyle text,
    the_filebutton text
);


--
-- TOC entry 25 (OID 670693)
-- Name: modeledef; Type: TABLE; Schema: public; Owner: dany
--

CREATE TABLE modeledef (
    mod_id integer DEFAULT nextval('s_modid'::text) NOT NULL,
    mod_name text NOT NULL,
    mod_desc text
);


\connect - toto

SET search_path = toto, pg_catalog;

--
-- TOC entry 14 (OID 670952)
-- Name: a; Type: SEQUENCE; Schema: toto; Owner: toto
--

CREATE SEQUENCE a
    START 1
    INCREMENT 1
    MAXVALUE 9223372036854775807
    MINVALUE 1
    CACHE 1;


--
-- TOC entry 26 (OID 670956)
-- Name: ax; Type: TABLE; Schema: toto; Owner: toto
--

CREATE TABLE ax (
    a serial NOT NULL
);


\connect - dany

SET search_path = public, pg_catalog;

--
-- TOC entry 41 (OID 670963)
-- Name: plpython_call_handler (); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION plpython_call_handler () RETURNS language_handler
    AS '$libdir/plpython', 'plpython_call_handler'
    LANGUAGE c;


--
-- TOC entry 38 (OID 670964)
-- Name: plpython; Type: PROCEDURAL LANGUAGE; Schema: public; Owner: 
--

CREATE TRUSTED PROCEDURAL LANGUAGE plpython HANDLER plpython_call_handler;


--
-- TOC entry 42 (OID 670966)
-- Name: myfunc (text); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION myfunc (text) RETURNS text
    AS '
return args[0]
    '
    LANGUAGE plpython;


--
-- TOC entry 43 (OID 678767)
-- Name: today_hour (text); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION today_hour (text) RETURNS text
    AS '
declare
hour text ;
begin
select to_char(now(),''HHMM'') into hour;
return hour;
end;
'
    LANGUAGE plpgsql;


--
-- TOC entry 44 (OID 678768)
-- Name: today_hour (void); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION today_hour (void) RETURNS text
    AS '
declare
hour text ;
begin
select to_char(now(),''HHMM'') into hour;
return hour;
end;
'
    LANGUAGE plpgsql;


--
-- TOC entry 45 (OID 678769)
-- Name: today_hour (); Type: FUNCTION; Schema: public; Owner: dany
--

CREATE FUNCTION today_hour () RETURNS text
    AS '
declare
hour text ;
begin
select to_char(now(),''HHMI'') into hour;
return hour;
end;
'
    LANGUAGE plpgsql;


--
-- Data for TOC entry 46 (OID 44758)
-- Name: a; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY a (col) FROM stdin;
5
5
5
\.


--
-- Data for TOC entry 47 (OID 662151)
-- Name: dany; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY dany (a, b) FROM stdin;
2	Secundo
3	Tertio
4	quatro
\.


--
-- Data for TOC entry 48 (OID 662163)
-- Name: dany_child; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY dany_child (a, c) FROM stdin;
2	Deux
3	Trois
4	Quatre
\.


--
-- Data for TOC entry 49 (OID 670660)
-- Name: ac_users; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY ac_users (use_id, use_first_name, use_name, use_login, use_active, use_pass, use_admin, use_theme, use_usertype) FROM stdin;
\.


--
-- Data for TOC entry 50 (OID 670670)
-- Name: ac_dossier; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY ac_dossier (dos_id, dos_name, dos_description, dos_jnt_user) FROM stdin;
\.


--
-- Data for TOC entry 51 (OID 670677)
-- Name: jnt_use_dos; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY jnt_use_dos (jnt_id, use_id, dos_id) FROM stdin;
\.


--
-- Data for TOC entry 52 (OID 670680)
-- Name: version; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY "version" (val) FROM stdin;
\.


--
-- Data for TOC entry 53 (OID 670682)
-- Name: priv_user; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY priv_user (priv_id, priv_jnt, priv_priv) FROM stdin;
\.


--
-- Data for TOC entry 54 (OID 670688)
-- Name: theme; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY theme (the_name, the_filestyle, the_filebutton) FROM stdin;
\.


--
-- Data for TOC entry 55 (OID 670693)
-- Name: modeledef; Type: TABLE DATA; Schema: public; Owner: dany
--

COPY modeledef (mod_id, mod_name, mod_desc) FROM stdin;
\.


\connect - toto

SET search_path = toto, pg_catalog;

--
-- Data for TOC entry 56 (OID 670956)
-- Name: ax; Type: TABLE DATA; Schema: toto; Owner: toto
--

COPY ax (a) FROM stdin;
\.


\connect - dany

SET search_path = public, pg_catalog;

--
-- TOC entry 29 (OID 662156)
-- Name: dany_pkey; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY dany
    ADD CONSTRAINT dany_pkey PRIMARY KEY (a);


--
-- TOC entry 57 (OID 662179)
-- Name: fk_dany; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY dany_child
    ADD CONSTRAINT fk_dany FOREIGN KEY (a) REFERENCES dany(a) ON UPDATE NO ACTION ON DELETE CASCADE;


--
-- TOC entry 30 (OID 670699)
-- Name: ac_users_pkey; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY ac_users
    ADD CONSTRAINT ac_users_pkey PRIMARY KEY (use_id);


--
-- TOC entry 31 (OID 670701)
-- Name: ac_users_use_login_key; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY ac_users
    ADD CONSTRAINT ac_users_use_login_key UNIQUE (use_login);


--
-- TOC entry 33 (OID 670703)
-- Name: ac_dossier_pkey; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY ac_dossier
    ADD CONSTRAINT ac_dossier_pkey PRIMARY KEY (dos_id);


--
-- TOC entry 32 (OID 670705)
-- Name: ac_dossier_dos_name_key; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY ac_dossier
    ADD CONSTRAINT ac_dossier_dos_name_key UNIQUE (dos_name);


--
-- TOC entry 34 (OID 670707)
-- Name: jnt_use_dos_pkey; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY jnt_use_dos
    ADD CONSTRAINT jnt_use_dos_pkey PRIMARY KEY (use_id, dos_id);


--
-- TOC entry 58 (OID 670709)
-- Name: $1; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY jnt_use_dos
    ADD CONSTRAINT "$1" FOREIGN KEY (use_id) REFERENCES ac_users(use_id) ON UPDATE NO ACTION ON DELETE NO ACTION;


--
-- TOC entry 35 (OID 670713)
-- Name: modeledef_pkey; Type: CONSTRAINT; Schema: public; Owner: dany
--

ALTER TABLE ONLY modeledef
    ADD CONSTRAINT modeledef_pkey PRIMARY KEY (mod_id);


--
-- TOC entry 5 (OID 670650)
-- Name: users_id; Type: SEQUENCE SET; Schema: public; Owner: dany
--

SELECT pg_catalog.setval ('users_id', 1, false);


--
-- TOC entry 7 (OID 670652)
-- Name: seq_jnt_use_dos; Type: SEQUENCE SET; Schema: public; Owner: dany
--

SELECT pg_catalog.setval ('seq_jnt_use_dos', 1, false);


--
-- TOC entry 9 (OID 670654)
-- Name: seq_priv_user; Type: SEQUENCE SET; Schema: public; Owner: dany
--

SELECT pg_catalog.setval ('seq_priv_user', 1, false);


--
-- TOC entry 11 (OID 670656)
-- Name: s_modid; Type: SEQUENCE SET; Schema: public; Owner: dany
--

SELECT pg_catalog.setval ('s_modid', 1, false);


--
-- TOC entry 13 (OID 670658)
-- Name: dossier_id; Type: SEQUENCE SET; Schema: public; Owner: dany
--

SELECT pg_catalog.setval ('dossier_id', 3, false);


\connect - toto

SET search_path = toto, pg_catalog;

--
-- TOC entry 15 (OID 670952)
-- Name: a; Type: SEQUENCE SET; Schema: toto; Owner: toto
--

SELECT pg_catalog.setval ('a', 1, false);


--
-- TOC entry 28 (OID 670954)
-- Name: ax_a_seq; Type: SEQUENCE SET; Schema: toto; Owner: toto
--

SELECT pg_catalog.setval ('ax_a_seq', 1, false);


--
-- TOC entry 27 (OID 670956)
-- Name: TABLE ax; Type: COMMENT; Schema: toto; Owner: toto
--

COMMENT ON TABLE ax IS 'Table created in the toto''s schema only for testing';


